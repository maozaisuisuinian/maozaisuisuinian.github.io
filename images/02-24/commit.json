{"compress":true,"commitItems":[["8516d216-92c8-4571-9892-47880e92d9f9",1550981411290,"",[[1550981378579,["whale@Whale",[[1,0,"上一篇："]],[0,0],[4,4]]],[1550983368424,["whale@Whale",[[1,4,"https://whale3070.github.io/linux/2016/03/03/%E6%9D%83%E9%99%90%E7%AE%A1%E7%90%86/"]],[4,4],[86,86]]],[1550983380586,["whale@Whale",[[1,4,"# 权限管理"]],[4,4],[10,10]]],[1550983382386,["whale@Whale",[[-1,4,"# "]],[6,6],[4,4]]],[1550983383350,["whale@Whale",[[1,4,"【"]],[4,4],[5,5]]],[1550983383998,["whale@Whale",[[-1,4,"【"]],[5,5],[4,4]]],[1550983385195,["whale@Whale",[[1,4,"["]],[4,4],[5,5]]],[1550983388067,["whale@Whale",[[1,9,"]("]],[9,9],[11,11]]],[1550983390297,["whale@Whale",[[1,93,")"]],[93,93],[94,94]]],[1550983391304,["whale@Whale",[[1,94,"\n\n"]],[94,94],[95,95]]],[1550983392369,["whale@Whale",[[1,96,"\n"]],[95,95],[96,96]]],[1550983521060,["whale@Whale",[[-1,96,"\n"],[1,97,"c"]],[96,96],[97,97]]],[1550983521785,["whale@Whale",[[-1,96,"c"]],[97,97],[96,96]]],[1550983522513,["whale@Whale",[[-1,95,"\n"],[1,96,"c"]],[96,96],[95,96]]],[1550983522814,["whale@Whale",[[1,96,"a"]],[95,96],[95,97]]],[1550983523332,["whale@Whale",[[1,97,"n"]],[95,97],[95,98]]],[1550983523694,["whale@Whale",[[1,98,"'k"]],[95,98],[95,100]]],[1550983524210,["whale@Whale",[[-1,95,"can'k"],[1,100,"参考"]],[95,100],[95,97]]],[1550983526547,["whale@Whale",[[1,97,"资料：https://gist.github.com/dergachev/7916152"]],[97,97],[141,141]]],[1550983529480,["whale@Whale",[[1,95,"\n"]],[95,95],[96,96]]],[1550985333193,["whale@Whale",[[1,142,"\n\n"]],[142,142],[143,143]]],[1550985333397,["whale@Whale",[[1,144,"\n"]],[143,143],[144,144]]],[1550986321002,["whale@Whale",[[1,145,"![4]($res/4.PNG)\n\n"]],[144,144],[162,162]]],[1550986330831,["whale@Whale",[[1,144,"为什么你不能做到，在一个已经被渗透的机器上禁止提权？\r\n\r\n假设某人临时获得了root权限访问了你的系统，即使你禁止了提权的方式，他们仍然\r\n有数不清的方式在以后重新访问你的系统。\r\n\r\n简单提一下一些明显的方法：\r\n- 添加/root/.ssh/authorized_keys\r\n- 添加新用户\r\n- 运行恶意软件\r\n- 使用cron job定时任务\r\n\r\n使用setuid可以使得任何用户运行root权限，而且你甚至不知道系统是否被入侵过。\r\n\r\n案例一：nano\r\n```\r\nssh root@target\r\n\r\nwhoami                 #    root\r\nls -al /bin/nano       #    -rwxr-xr-x 1 root root 191976 2010-02-01 20:30 /bin/nano\r\n\r\nchmod u+s /bin/nano    # installs the backdoor\r\n\r\n```\r\n"]],[144,144],[581,581]]],[1550986334473,["whale@Whale",[[1,144,"#"],[-1,170,"\r"],[-1,172,"\r"],[-1,213,"\r"],[-1,234,"\r"],[-1,236,"\r"],[-1,251,"\r"],[-1,283,"\r"],[-1,292,"\r"],[-1,302,"\r"],[-1,320,"\r"],[-1,322,"\r"],[-1,366,"\r"],[-1,368,"\r"],[-1,378,"\r"],[-1,383,"\r"],[-1,400,"\r"],[-1,402,"\r"],[-1,436,"\r"],[-1,522,"\r"],[-1,524,"\r"],[-1,572,"\r"],[-1,574,"\r"],[-1,579,"\r"]],[144,144],[145,145]]],[1550986334983,["whale@Whale",[[1,145,"# "]],[145,145],[147,147]]],[1550986344373,["whale@Whale",[[-1,561,"\n"]],[561,561],[560,560]]],[1550986345740,["whale@Whale",[[1,579,"\n"]],[577,577],[578,578]]],[1550986346100,["whale@Whale",[[1,580,"\n"]],[578,578],[579,579]]],[1550986346806,["whale@Whale",[[1,579,"an"]],[579,579],[581,581]]],[1550986347307,["whale@Whale",[[-1,579,"an"]],[581,581],[579,579]]],[1550986352171,["whale@Whale",[[1,579,"案例二：nmap"]],[579,579],[587,587]]],[1550986352376,["whale@Whale",[[1,589,"\n"]],[587,587],[588,588]]],[1550986726088,["whale@Whale",[[1,590,"\n"]],[588,588],[589,589]]],[1550986726310,["whale@Whale",[[1,589,"一旦nano 后门被设置，之后hacker可以用非root用户获取到root权限。\r\n\r\n例如：`nano /root/.ssh/authorized_keys `\r\n\r\n- 一旦系统被黑，特别是获取到root权限，你就再也不能信任它了。你必须找到源头漏洞在哪里，\r\n然后用一个干净的系统重置，并且打上补丁。\r\n\r\n- 通常，你不能允许任何不信任的组织使用shell连入系统，因为你可能对linux漏洞的知识不精通。"]],[589,589],[797,797]]],[1550986794818,[null,[[-1,630,"\r\n\r"],[1,633,"\n\n\n"],[-1,671,"\r\n\r"],[1,674,"\n\n\n"],[-1,721,"\r"],[1,722,"\n"],[-1,743,"\r\n\r"],[1,746,"\n\n\n"]],[630,630],[749,749]]],[1550986794818,[null,[[1,630,"\r\n\r"],[-1,630,"\n\n\n"],[1,671,"\r\n\r"],[-1,671,"\n\n\n"],[1,721,"\r"],[-1,721,"\n"],[1,743,"\r\n\r"],[-1,743,"\n\n\n"]],[749,749],[630,630]]],[1550986744064,["whale@Whale",[[1,587,"m"],[-1,630,"\r"],[-1,632,"\r"],[-1,671,"\r"],[-1,673,"\r"],[-1,721,"\r"],[-1,743,"\r"],[-1,745,"\r"]],[587,587],[588,588]]],[1550986744409,["whale@Whale",[[1,588,"in"]],[588,588],[590,590]]],[1550986745090,["whale@Whale",[[-1,587,"min"]],[590,590],[587,587]]],[1550986748403,["whale@Whale",[[1,587,"命令行模式"]],[587,587],[592,592]]],[1550986789079,["whale@Whale",[[1,144,"\n"]],[143,143],[144,144]]],[1550986789384,["whale@Whale",[[1,144,"https://pentestlab.blog/tag/find/"]],[144,144],[177,177]]],[1550986791071,["whale@Whale",[[-1,143,"\n"]],[143,143],[142,142]]],[1550986791913,["whale@Whale",[[1,177,"\n"]],[176,176],[177,177]]],[1550986793896,["whale@Whale",[[1,143,"\n"]],[143,143],[144,144]]],[1550986794985,["whale@Whale",[[1,101,"\n"]],[101,101],[102,102]]],[1550986795769,["whale@Whale",[[1,102,"\n"]],[102,102],[103,103]]],[1550986797935,["whale@Whale",[[-1,145,"\n"]],[145,145],[144,144]]],[1550986799361,["whale@Whale",[[1,144,"、"]],[144,144],[145,145]]],[1550986799882,["whale@Whale",[[-1,144,"、"]],[145,145],[144,144]]],[1550986809273,["whale@Whale",[[-1,102,"\n"]],[102,102],[101,101]]],[1550986811599,["whale@Whale",[[-1,143,"\n"]],[143,143],[143,143]]],[1550986813562,["whale@Whale",[[1,143," 、"]],[143,143],[145,145]]],[1550986824400,["whale@Whale",[[-1,615,"案例二：nmap命令行模式\n"]],[615,629],[615,615]]],[1550986824846,["whale@Whale",[[-1,615,"\n"]],[615,615],[614,614]]],[1550986827293,["whale@Whale",[[-1,398,"一"]],[399,399],[398,398]]],[1550986886823,["whale@Whale",[[1,817,"\n"]],[816,816],[817,817]]],[1550986899164,["whale@Whale",[[-1,817,"\n"],[1,818,"## bash script"]],[817,817],[831,831]]],[1550987026484,["whale@Whale",[[1,831,"\n\n![5]($res/5.PNG)\n\n"]],[831,831],[850,850]]],[1550987028892,["whale@Whale",[[1,832,"jian"]],[832,832],[836,836]]],[1550987029729,["whale@Whale",[[-1,832,"jian"]],[836,836],[832,832]]],[1550987031716,["whale@Whale",[[1,820,"\n"]],[820,820],[821,821]]],[1550987033470,["whale@Whale",[[-1,820,"\n"]],[821,821],[820,820]]],[1550987034595,["whale@Whale",[[1,820,"j"]],[820,820],[821,821]]],[1550987035093,["whale@Whale",[[-1,820,"j"]],[821,821],[820,820]]],[1550987036417,["whale@Whale",[[1,820,"检查"]],[820,820],[822,822]]],[1550987039431,["whale@Whale",[[1,822,"suid的"]],[822,822],[827,827]]],[1550987060876,["whale@Whale",[[1,839,"#!/bin/bash\r\ncd /tmp\r\nfind / -perm -4000 2>/dev/null > examSUID.txt\r\ncat examSUID.txt | grep -E \"nmap|vim|find|bash|more|less|nano|cp\""]],[839,839],[973,973]]],[1550987062789,["whale@Whale",[[1,839,"\n"],[-1,850,"\r"],[-1,859,"\r"],[-1,906,"\r"]],[838,838],[839,839]]],[1550987064001,["whale@Whale",[[1,839,"```"]],[839,839],[842,842]]],[1550987066764,["whale@Whale",[[1,975,"\n"]],[974,974],[975,975]]],[1550987067488,["whale@Whale",[[1,975,"```"]],[975,975],[978,978]]],[1550987104930,["whale@Whale",[[1,975,"\n"]],[974,974],[975,975]]],[1550987110564,["whale@Whale",[[1,975,"rm /t"]],[975,975],[980,980]]],[1550987111321,["whale@Whale",[[-1,978,"/t"]],[980,980],[978,978]]],[1550987119404,["whale@Whale",[[1,978,"/tmp/examSUID.txt"]],[978,978],[995,995]]],[1550987137596,["whale@Whale",[[1,1018,"\n"]],[1017,1017],[1018,1018]]],[1550987137970,["whale@Whale",[[-1,1018,"\n"],[1,1019,"r"]],[1018,1018],[1019,1019]]],[1550987138405,["whale@Whale",[[-1,1018,"r"]],[1019,1019],[1018,1018]]],[1550987138879,["whale@Whale",[[-1,1017,"\n"],[1,1018,"r"]],[1018,1018],[1017,1018]]],[1550987139470,["whale@Whale",[[1,1018,"u"]],[1017,1018],[1017,1019]]],[1550987140049,["whale@Whale",[[-1,1018,"u"]],[1017,1019],[1017,1018]]],[1550987140271,["whale@Whale",[[-1,1017,"r"]],[1017,1018],[0,0]]]]]]}