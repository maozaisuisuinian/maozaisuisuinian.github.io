{"compress":true,"commitItems":[["b3c5fb84-3a6a-4b9f-a436-5d37121212a9",1543655051809,"",[[1543654993354,["whale@Whale",[[1,0,"sense\n===\n\n\n"]],[0,0],[12,12]]],[1543654999968,["whale@Whale",[[-1,0,"sense"],[1,5,"title: "]],[0,5],[7,7]]],[1543655003265,["whale@Whale",[[-1,8,"==="]],[8,11],[8,8]]],[1543655006874,["whale@Whale",[[1,7,"sense()"]],[7,7],[14,14]]],[1543655013510,["whale@Whale",[[1,13,"pfsense-命令执行"]],[13,13],[25,25]]],[1543655014982,["whale@Whale",[[1,30,"\n"]],[26,26],[27,27]]],[1543655015402,["whale@Whale",[[1,31,"\n"]],[27,27],[28,28]]]]],["fc6d165f-5179-4d87-9930-4ac171ccd761",1545299147825,"title: sense(pfsense-命令执行)\n\n\n\n\n\n",[[1545299129663,["whale@Whale",[[1,31,"第一次在hack-the-box做实验，还是选个简单的吧，免得信心被打击得怀疑人生。"]],[31,31],[73,73]]],[1545299131607,["whale@Whale",[[-1,30,"\n"]],[30,30],[29,29]]],[1545299131837,["whale@Whale",[[-1,29,"\n"]],[29,29],[28,28]]],[1545299132208,["whale@Whale",[[-1,28,"\n"]],[28,28],[27,27]]],[1545299134228,["whale@Whale",[[1,71,"\n"]],[70,70],[71,71]]],[1545299134584,["whale@Whale",[[1,72,"\n"]],[71,71],[72,72]]],[1545299152988,["whale@Whale",[[1,73,"![2883590-c23ca97dc60e8680]($res/2883590-c23ca97dc60e8680.PNG)\n\n"]],[72,72],[136,136]]],[1545299154596,["whale@Whale",[[-1,72,"\n"]],[72,72],[71,71]]],[1545299156234,["whale@Whale",[[1,136,"\n"]],[134,134],[135,135]]],[1545299156646,["whale@Whale",[[1,137,"\n"]],[135,135],[136,136]]],[1545299180351,["whale@Whale",[[1,136,"# 侦察：\n\nhttp://10.10.10.60\n\n访问该网站，有一个登陆表单。侦察的手段和用到工具以前讲过的就不提了，不然文章太冗长了。\n\n#### 1.随便输入用户名和密码。\n\n提示：Username or Password incorrect\n\n#### 2.尝试输入admin/admin，提示："]],[136,136],[289,289]]],[1545299183017,["whale@Whale",[[1,291,"\n"]],[289,289],[290,290]]],[1545299201118,["whale@Whale",[[1,291,"![2883590-b088f032fff6992d]($res/2883590-b088f032fff6992d.PNG)\n\n"]],[290,290],[354,354]]],[1545299202847,["whale@Whale",[[1,356,"\n"]],[354,354],[355,355]]],[1545299214993,["whale@Whale",[[1,355,"什么情况？! 猜测，可能是js脚本有检测跨站脚本攻击csrf的代码，em.........总之验证crsf没有通过，要看看js脚本才知道怎么回事。\n\n#### 3.F12查看网络交互\n\n> index.php\n> \n> **jquery.js**\n> \n> **niftyjsCode.js**\n> \n> csrf-magic.js\n> \n> css和gif文件应该不重要，重点分析php脚本和js脚本。\n\n**网站文件存在的路径：**\n\nhttps://10.10.10.60/csrf/csrf-magic.js\n\nhttps://10.10.10.60/themes/**pfsense**_ng/javascript/niftyjsCode.js\n\nhttps://10.10.10.60/javascript/jquery.js\n\nhttps://10.10.10.60/tree/\n\nhttps://10.10.10.60//xmlrpc.php\n\nhttps://10.10.10.60/installer/installer.php\n\n#### 4.提交的参数：\n\n表单提交方式是post，有四个参数，两个自定义参数，usernamefld/passwordfld，两个默认参数，__csrf_magic和login。\n\n#### 5.配置等info：\n\n> cms：SilverStripe /version？                   php-version：?               web-server：lighttpd/1.4.35\n\n#### 6.可能的弱点：\n\n6.1-Site appears vulnerable to the 'shellshock' vulnerability (http://cve.mitre.org/cgi-bin/cvename.cgi?name=CVE-2014-6278).\n\n搜索shellshock，看不懂。\n\n6.2 搜索SilverStripe Tree Control，于是找到了一个方向，或许有cms漏洞。[cve detail](https://www.cvedetails.com/cve/CVE-2015-5063/)\n\n然后尝试xss，，\n\n* * *\n\nem..........做不出来，没有sql bug与brute force就不能突破防线了么，╯︿╰ 桑心\n\n[论坛讨论地址](https://forum.hackthebox.eu/discussion/132/sense)，看到有人跟我一样我就放心了，但是他们只会说“加油，你可以的，多侦察，做调查，仔细点！”，我：“******！xxx！x！（此处屏蔽违禁词汇）”\n\ndirbuster真的枚举不出来什么啊\n\no(︶︿︶)o"]],[355,355],[1550,1550]]],[1545299220607,["whale@Whale",[[-1,969,"                   "],[1,988,"                   "],[-1,1001,"               "],[1,1016,"               "],[1,1550,"\n"]],[1550,1550],[1551,1551]]],[1545299254021,["whale@Whale",[[1,1553,"![2883590-4d157fc9ea214e0f]($res/2883590-4d157fc9ea214e0f.PNG)\n\n"]],[1552,1552],[1616,1616]]],[1545299255626,["whale@Whale",[[-1,1552,"\n"]],[1552,1552],[1551,1551]]],[1545299256911,["whale@Whale",[[1,1616,"\n"]],[1615,1615],[1616,1616]]],[1545299267904,["whale@Whale",[[1,1616,"#### 7.看攻略说是字典/工具的问题。\n\n说明我用dirbuster默认字典没有扫到关键的文档。\n\n/usr/share/dirb/wordlists/common.txt        没有扫出\n\n* * *\n\n[writeup地址](https://v3ded.github.io/ctf/htb-sense.html)：\n\n第三步信息搜集时，有一个链接暗示了https://10.10.10.60/themes/**pfsense**_ng/javascript/niftyjsCode.js\n\npfsense是一个开源防火墙程序\n\ngobuster -u [https://10.10.10.60/](https://10.10.10.60/)-w/usr/share/wordlists/dirbuster/directory-list-2.3-medium.txt-e"]],[1616,1616],[2008,2008]]],[1545299275661,["whale@Whale",[[-1,1704,"       "],[1,1711,"       "],[-1,1899," "],[1,1900," "],[1,2009,"\n"]],[2008,2008],[2009,2009]]],[1545299276033,["whale@Whale",[[1,2010,"\n"]],[2009,2009],[2010,2010]]],[1545299283475,["whale@Whale",[[-1,2010,"\n"],[1,2011,"## 总结："]],[2010,2010],[2016,2016]]],[1545299283861,["whale@Whale",[[1,2016,"\n\n"]],[2016,2016],[2017,2017]]],[1545299291121,["whale@Whale",[[-1,2017,"\n"],[1,2018,"该pfsense"]],[2017,2017],[2025,2025]]],[1545299294225,["whale@Whale",[[-1,2018,"pfsense"]],[2025,2025],[2018,2018]]],[1545299307322,["whale@Whale",[[1,2018,"目标机，不能够爆破。尝试"]],[2018,2018],[2030,2030]]],[1545299315579,["whale@Whale",[[-1,2028,"尝试"]],[2030,2030],[2028,2028]]],[1545299326958,["whale@Whale",[[1,2028,"哪怕多输错几次账号/"]],[2028,2028],[2038,2038]]],[1545299334957,["whale@Whale",[[1,2038,"密码，都会拒绝访问。"]],[2038,2038],[2048,2048]]],[1545299335360,["whale@Whale",[[1,2048,"\n\n"]],[2048,2048],[2049,2049]]],[1545299335923,["whale@Whale",[[1,2050,"\n"]],[2049,2049],[2050,2050]]],[1545299372109,["whale@Whale",[[-1,2050,"\n"],[1,2051,"但是很巧妙的是，将口令藏在文字"]],[2050,2050],[2065,2065]]],[1545299372654,["whale@Whale",[[-1,2063,"文字"]],[2065,2065],[2063,2063]]],[1545299387393,["whale@Whale",[[1,2063,"文件中，如果工具发现，那就能够做。"]],[2063,2063],[2080,2080]]],[1545299387732,["whale@Whale",[[1,2080,"\n\n"]],[2080,2080],[2081,2081]]],[1545299388016,["whale@Whale",[[1,2082,"\n"]],[2081,2081],[2082,2082]]],[1545299388308,["whale@Whale",[[1,2082,"```\n/usr/share/wordlists/dirbuster/directory-list-2.3-medium.txt\n```"]],[2082,2082],[2150,2150]]],[1545299409134,["whale@Whale",[[1,2082,"\n"]],[2080,2080],[2081,2081]]],[1545299409418,["whale@Whale",[[1,2083,"\n"]],[2081,2081],[2082,2082]]],[1545299420739,["whale@Whale",[[1,2082,"回顾半年前，我尝试的这个字典“”"]],[2082,2082],[2098,2098]]],[1545299421671,["whale@Whale",[[1,2097,"/usr/share/dirb/wordlists/common.txt  "]],[2097,2097],[2135,2135]]],[1545299445212,["whale@Whale",[[1,2136,"，能够成功找到敏感文件，那才"]],[2136,2136],[2150,2150]]],[1545299461255,["whale@Whale",[[1,2150,"奇怪。说明我对工具一点都不熟悉。"]],[2150,2150],[2166,2166]]],[1545299463542,["whale@Whale",[[1,2168,"\n"]],[2166,2166],[2167,2167]]],[1545299463905,["whale@Whale",[[1,2169,"\n"]],[2167,2167],[2168,2168]]],[1545299465106,["whale@Whale",[[-1,2169,"\n"]],[2168,2168],[2167,2167]]],[1545299465452,["whale@Whale",[[-1,2168,"\n"]],[2167,2167],[2166,2166]]],[1545299473357,["whale@Whale",[[1,2166,"菜的一笔=="]],[2166,2166],[2172,2172]]],[1545299475444,["whale@Whale",[[1,2174,"\n"]],[2172,2172],[2173,2173]]],[1545299476389,["whale@Whale",[[1,2175,"\n"]],[2173,2173],[2174,2174]]],[1545299486123,["whale@Whale",[[-1,2175,"\n"]],[2174,2174],[2173,2173]]],[1545299494472,["whale@Whale",[[1,2174,"常用的地址"]],[2174,2174],[2179,2179]]],[1545299495249,["whale@Whale",[[-1,2177,"地址"]],[2179,2179],[2177,2177]]],[1545299507660,["whale@Whale",[[1,2177,"枚举网站路径的"]],[2177,2177],[2184,2184]]],[1545299511335,["whale@Whale",[[1,2184,"地址："]],[2184,2184],[2187,2187]]],[1545299514730,["whale@Whale",[[1,2257,"\n"]],[2256,2256],[2257,2257]]],[1545299593639,["whale@Whale",[[-1,2257,"\n"],[1,2258,"找到了两个敏感文件，一个提示了pfsense办"]],[2257,2257],[2280,2280]]],[1545299594558,["whale@Whale",[[-1,2279,"办"]],[2280,2280],[2279,2279]]],[1545299604787,["whale@Whale",[[1,2279,"版本，一个给了用户名密码/"]],[2279,2279],[2292,2292]]],[1545299605544,["whale@Whale",[[-1,2291,"/"]],[2292,2292],[2291,2291]]],[1545299605796,["whale@Whale",[[1,2291,"。"]],[2291,2291],[2292,2292]]],[1545299606508,["whale@Whale",[[1,2292,"\n\n"]],[2292,2292],[2293,2293]]],[1545299607063,["whale@Whale",[[1,2294,"\n"]],[2293,2293],[2294,2294]]],[1545299609558,["whale@Whale",[[-1,2294,"\n"]],[2294,2294],[0,0]]],[1545299614603,["whale@Whale",[[1,2294,"\n\n"]],[2294,2294],[2295,2295]]],[1545299615406,["whale@Whale",[[-1,2295,"\n"]],[2295,2295],[2294,2294]]],[1545299618828,["whale@Whale",[[-1,2294,"\n"],[1,2295,"用msf"]],[2294,2294],[2298,2298]]],[1545299620932,["whale@Whale",[[-1,2296,"sf"]],[2298,2298],[2296,2296]]],[1545299625060,["whale@Whale",[[1,2296,"sf，search pt"]],[2296,2296],[2308,2308]]],[1545299625558,["whale@Whale",[[-1,2307,"t"]],[2308,2308],[2307,2307]]],[1545299628392,["whale@Whale",[[1,2307,"fsense，"]],[2307,2307],[2314,2314]]],[1545299632010,["whale@Whale",[[1,2314,"命令"]],[2314,2314],[2316,2316]]],[1545299632767,["whale@Whale",[[-1,2314,"命令"]],[2316,2316],[2314,2314]]],[1545299635986,["whale@Whale",[[1,2314,"命令执行，"]],[2314,2314],[2319,2319]]],[1545299637092,["whale@Whale",[[-1,2318,"，"]],[2319,2319],[2318,2318]]],[1545299640262,["whale@Whale",[[1,2318,"的模块"]],[2318,2318],[2321,2321]]],[1545299644392,["whale@Whale",[[-1,2318,"的模块"]],[2321,2321],[2318,2318]]],[1545299657377,["whale@Whale",[[1,2318,"漏洞的exp，直接获取root权限。"]],[2318,2318],[2336,2336]]]]]]}